<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Publish Rmarkdown Documents With Database Connections Without Exposing Credentials</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link rel="apple-touch-icon" sizes="180x180" href="~/assets/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/favicon/site.webmanifest">
<link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/favicon/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Nathan's Projects</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Visualizing Arlington Bikeometers
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="part_1_the_plan.html">Part 1: The Plan</a>
    </li>
    <li>
      <a href="part_2_query_the_api.html">Part 2: Query the API</a>
    </li>
    <li>
      <a href="part_3_setup_your_database.html">Part 3: Setup and Connect Your Database</a>
    </li>
    <li>
      <a href="part_4_save_the_data_in_a_mysql_database.html">Part 4: Save the Data in Your Local MySQL Database</a>
    </li>
    <li>
      <a href="part_5_picking_bikeometers_to_graph.html">Part 5: Picking Which Bikeometers to Graph</a>
    </li>
    <li>
      <a href="part_6_creating_initial_visualizations.html">Part 6: Creating the Initial Visualizations</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="note_fixing_rpytools_error.html">Fixing rpytools error</a>
    </li>
    <li>
      <a href="note_knit_rmarkdown_db.html">Publish Rmarkdown Documents With Database Connections Without Exposing Credentials</a>
    </li>
  </ul>
</li>
<li>
  <a href="photography.html">Photography</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/photonathan">Github</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Publish Rmarkdown Documents With Database Connections Without Exposing Credentials</h1>

</div>


<p>   </p>
<div id="how-to" class="section level1">
<h1>How to</h1>
<p>Follow instructions on <a href="https://www.r-bloggers.com/2018/05/setting-up-an-odbc-connection-with-ms-sql-server-on-windows/">this website</a> to create Data Source Name (DSN) that securely stores your connection variables (user, password, connection information) in Windows so that a connection can be made from R just by calling the DSN ‘Alias’.</p>
<div id="r" class="section level3">
<h3>R</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(odbc<span class="sc">::</span><span class="fu">odbc</span>(), <span class="at">dsn =</span> <span class="st">&quot;Bike_MySQL&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>con</span></code></pre></div>
<pre><code>## &lt;OdbcConnection&gt; root@localhost via TCP/IP
##   Database: bikeometers_db
##   MySQL Version: 8.0.23</code></pre>
</div>
<div id="python" class="section level3">
<h3>Python</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sqlalchemy <span class="im">import</span> create_engine</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>engine <span class="op">=</span> create_engine(<span class="ss">f&#39;mysql+mysqldb://</span><span class="sc">{os.</span>environ[<span class="st">&quot;arlington_user&quot;</span>]<span class="sc">}</span><span class="ss">:</span><span class="sc">{os.</span>environ[<span class="st">&quot;arlington_password&quot;</span>]<span class="sc">}</span><span class="ss">@localhost/bikeometers_db&#39;</span>, echo<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>engine.<span class="ex">connect</span>()</span></code></pre></div>
<pre><code>## &lt;sqlalchemy.engine.base.Connection object at 0x000000002FAE1A58&gt;</code></pre>
</div>
</div>
<div id="background" class="section level1">
<h1>Background</h1>
<p>Publishing my finished project and documenting every line of code I ran to complete it is a great way for people to replicate/validate my work and also enables people to learn from my methods. However, the problem with publishing every line of code is when it’s time to login to my database, I need a way to hide my credentials.</p>
<div id="r-1" class="section level3">
<h3>R</h3>
<p>Originally, I made the connection using:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(odbc<span class="sc">::</span><span class="fu">odbc</span>(), <span class="at">.connection_string =</span> <span class="st">&quot;Driver={MySQL ODBC 8.0 Unicode Driver};&quot;</span>, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">server =</span> <span class="st">&quot;localhost&quot;</span>, <span class="at">db =</span> <span class="st">&quot;bikeometers_db&quot;</span>, <span class="at">user =</span> <span class="st">&quot;root&quot;</span>, <span class="at">password =</span> rstudioapi<span class="sc">::</span><span class="fu">askForPassword</span>(<span class="st">&quot;Database password&quot;</span>))</span></code></pre></div>
<p>However this requires me to enter in a password each time I wanted to Knit the document. This was only a minor inconvenience when Knitting individual documents but when I wanted to add another post to my website, I couldn’t use the ‘Build Website’ button in RStudio as it wouldn’t call the ‘rstudioapi::askForPassword’ function.</p>
<p>So, I needed a way to <strong>securely</strong> connect to my database from a <strong>open source</strong> RMarkdown document.</p>
<p>Enter the great (but surprisingly not the top result on Google) <a href="https://db.rstudio.com/best-practices/managing-credentials/">RStudio documentation</a>. It lists ‘Integrated Security with DSN’ as the top method for securing your database credentials. A quick search for ‘r DSN’ brought me to <a href="https://www.r-bloggers.com/2018/05/setting-up-an-odbc-connection-with-ms-sql-server-on-windows/">this website</a> which outlined how I could setup an ‘alias’ from the ‘ODBC Data Sources’ Windows app. Then from RStudio, I could call that DSN (Data Source Name) using the below code:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(odbc)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(odbc<span class="sc">::</span><span class="fu">odbc</span>(), <span class="at">dsn =</span> <span class="st">&quot;N_MySQL&quot;</span>, <span class="at">db=</span><span class="st">&#39;bikeometers_db&#39;</span>)</span></code></pre></div>
<p>This would allow me to make the connection from within a published RMarkdown document without exposing my credentials.</p>
<p>I could even <strong>specify the database</strong> from within ODBC and just pass in the DSN name like below:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(odbc<span class="sc">::</span><span class="fu">odbc</span>(), <span class="at">dsn =</span> <span class="st">&quot;Bike_MySQL&quot;</span>)</span></code></pre></div>
<p><img src="images/ODBC%20Data%20Source%20Config.jpg" title="ODBC data source config" /></p>
<p>Easy peasy!</p>
<p><a href="https://cran.r-project.org/web/packages/httr/vignettes/secrets.html">Here’s</a> a great post by Hadley Wickham that goes over different scenarios when you may want to store ‘secrets’ and how best to accomplish them.</p>
</div>
<div id="python-in-r" class="section level3">
<h3>Python in R</h3>
<p>If you are including Python code to be run with the <em>reticulate</em> library, you have a few options and a few headaches.</p>
</div>
<div id="pyodbc" class="section level3">
<h3>PyODBC</h3>
<p>PyODBC is an easy way to access your database via your DSN alias, eliminating the need to hard-code your credentials. However, I can’t figure out how to make it play nice with Pandas… see below.</p>
</div>
<div id="sqlalchemy-pandas" class="section level3">
<h3>SQLAlchemy + Pandas</h3>
<p>Currently, I am using the Pandas method .to_sql() quite a lot to move my dataframes into MySQL. However, Pandas requires a SQLAlchemy ‘engine’ object. To create this ‘engine’ object I can’t use my DSN method to make the database connection. <strong>Do not</strong> hard-code your credentials like below.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>engine <span class="op">=</span> create_engine(<span class="ss">f&#39;mysql+mysqldb://newuser:donteventry@localhost/bikeometers_db&#39;</span>, echo<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<p>After some research there are other options. The most straight forward <a href="https://stackoverflow.com/a/2397905">option</a> seemed to be saving the username and password in a separate .py document which I could import like so:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> config.py <span class="im">import</span> username, password</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>engine <span class="op">=</span> create_engine(<span class="ss">f&#39;mysql+mysqldb://</span><span class="sc">{</span>username<span class="sc">}</span><span class="ss">:</span><span class="sc">{</span>password<span class="sc">}</span><span class="ss">@localhost/bikeometers_db&#39;</span>, echo<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<p>Obviously, just add this config.py document to the .gitignore file so it wont get uploaded to github.</p>
<p>Another <a href="https://stackoverflow.com/a/30664318">option</a> is to store the credentials in an environment variable.</p>
<p>You can see all your environment variables by using the following R code:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.getenv</span>()</span></code></pre></div>
<p>Set an environment variable using:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">username =</span> <span class="st">&quot;nathan&quot;</span>)</span></code></pre></div>
<p>Call an environment variable using:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.getenv</span>(<span class="st">&#39;username&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;nathan&quot;</code></pre>
<p>In Python you can use ‘os’ module to set and get environment variables.</p>
<p>To see all environment variables:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(os.environ)</span></code></pre></div>
<p>To set an environment variable:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>os.environ[<span class="st">&#39;username&#39;</span>] <span class="op">=</span> <span class="st">&#39;nathan&#39;</span></span></code></pre></div>
<p>Call an environment variable using:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>os.environ[<span class="st">&#39;username&#39;</span>]</span></code></pre></div>
<pre><code>## &#39;nathan&#39;</code></pre>
<p>Both options have major downsides as any method where you record your credentials is not very secure. If I’m worrying about a bad actor gaining access to my computer, both credential storage methods leave me vulnerable while the ‘config.py’ method adds extra risk if the document is accidentally published to github.</p>
<p>After reading over the above linked articles and <a href="https://www.12factor.net/config">this</a> article, I’ll choose using the environment variable in my project’s virtual environment as it reduces the risk of accidentally publishing my password to Github. After the project is published I can then remove the password from the environment variable.</p>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIlB1Ymxpc2ggUm1hcmtkb3duIERvY3VtZW50cyBXaXRoIERhdGFiYXNlIENvbm5lY3Rpb25zIFdpdGhvdXQgRXhwb3NpbmcgQ3JlZGVudGlhbHMiDQpvdXRwdXQ6DQogIGh0bWxfZG9jdW1lbnQ6IA0KICAgIGhpZ2hsaWdodDogemVuYnVybg0KICAgIGNvZGVfZG93bmxvYWQ6IHRydWUNCiAgICBpbmNsdWRlczoNCiAgICAgIGluX2hlYWRlcjogaGVhZGVyLmh0bWwNCi0tLQ0KXCANClwgDQoNCiMgSG93IHRvDQoNCkZvbGxvdyBpbnN0cnVjdGlvbnMgb24gW3RoaXMgd2Vic2l0ZV0oaHR0cHM6Ly93d3cuci1ibG9nZ2Vycy5jb20vMjAxOC8wNS9zZXR0aW5nLXVwLWFuLW9kYmMtY29ubmVjdGlvbi13aXRoLW1zLXNxbC1zZXJ2ZXItb24td2luZG93cy8pIHRvIGNyZWF0ZSBEYXRhIFNvdXJjZSBOYW1lIChEU04pIHRoYXQgc2VjdXJlbHkgc3RvcmVzIHlvdXIgY29ubmVjdGlvbiB2YXJpYWJsZXMgKHVzZXIsIHBhc3N3b3JkLCBjb25uZWN0aW9uIGluZm9ybWF0aW9uKSBpbiBXaW5kb3dzIHNvIHRoYXQgYSBjb25uZWN0aW9uIGNhbiBiZSBtYWRlIGZyb20gUiBqdXN0IGJ5IGNhbGxpbmcgdGhlIERTTiAnQWxpYXMnLg0KDQojIyMgUg0KDQpgYGB7cn0NCmxpYnJhcnkoREJJKQ0KY29uIDwtIGRiQ29ubmVjdChvZGJjOjpvZGJjKCksIGRzbiA9ICJCaWtlX015U1FMIikNCmNvbg0KYGBgDQoNCiMjIyBQeXRob24NCg0KYGBge3B5dGhvbn0NCmltcG9ydCBvcw0KZnJvbSBzcWxhbGNoZW15IGltcG9ydCBjcmVhdGVfZW5naW5lDQoNCmVuZ2luZSA9IGNyZWF0ZV9lbmdpbmUoZidteXNxbCtteXNxbGRiOi8ve29zLmVudmlyb25bImFybGluZ3Rvbl91c2VyIl19Ontvcy5lbnZpcm9uWyJhcmxpbmd0b25fcGFzc3dvcmQiXX1AbG9jYWxob3N0L2Jpa2VvbWV0ZXJzX2RiJywgZWNobz1GYWxzZSkNCg0KZW5naW5lLmNvbm5lY3QoKQ0KYGBgDQoNCiMgQmFja2dyb3VuZA0KDQpQdWJsaXNoaW5nIG15IGZpbmlzaGVkIHByb2plY3QgYW5kIGRvY3VtZW50aW5nIGV2ZXJ5IGxpbmUgb2YgY29kZSBJIHJhbiB0byBjb21wbGV0ZSBpdCBpcyBhIGdyZWF0IHdheSBmb3IgcGVvcGxlIHRvIHJlcGxpY2F0ZS92YWxpZGF0ZSBteSB3b3JrIGFuZCBhbHNvIGVuYWJsZXMgcGVvcGxlIHRvIGxlYXJuIGZyb20gbXkgbWV0aG9kcy4gSG93ZXZlciwgdGhlIHByb2JsZW0gd2l0aCBwdWJsaXNoaW5nIGV2ZXJ5IGxpbmUgb2YgY29kZSBpcyB3aGVuIGl0J3MgdGltZSB0byBsb2dpbiB0byBteSBkYXRhYmFzZSwgSSBuZWVkIGEgd2F5IHRvIGhpZGUgbXkgY3JlZGVudGlhbHMuDQoNCiMjIyBSDQoNCk9yaWdpbmFsbHksIEkgbWFkZSB0aGUgY29ubmVjdGlvbiB1c2luZzoNCg0KYGBge3IgZXZhbD1GQUxTRX0NCmNvbiA8LSBkYkNvbm5lY3Qob2RiYzo6b2RiYygpLCAuY29ubmVjdGlvbl9zdHJpbmcgPSAiRHJpdmVyPXtNeVNRTCBPREJDIDguMCBVbmljb2RlIERyaXZlcn07IiwgDQogICAgICAgICAgICAgICAgIHNlcnZlciA9ICJsb2NhbGhvc3QiLCBkYiA9ICJiaWtlb21ldGVyc19kYiIsIHVzZXIgPSAicm9vdCIsIHBhc3N3b3JkID0gcnN0dWRpb2FwaTo6YXNrRm9yUGFzc3dvcmQoIkRhdGFiYXNlIHBhc3N3b3JkIikpDQpgYGANCg0KSG93ZXZlciB0aGlzIHJlcXVpcmVzIG1lIHRvIGVudGVyIGluIGEgcGFzc3dvcmQgZWFjaCB0aW1lIEkgd2FudGVkIHRvIEtuaXQgdGhlIGRvY3VtZW50LiBUaGlzIHdhcyBvbmx5IGEgbWlub3IgaW5jb252ZW5pZW5jZSB3aGVuIEtuaXR0aW5nIGluZGl2aWR1YWwgZG9jdW1lbnRzIGJ1dCB3aGVuIEkgd2FudGVkIHRvIGFkZCBhbm90aGVyIHBvc3QgdG8gbXkgd2Vic2l0ZSwgSSBjb3VsZG4ndCB1c2UgdGhlICdCdWlsZCBXZWJzaXRlJyBidXR0b24gaW4gUlN0dWRpbyBhcyBpdCB3b3VsZG4ndCBjYWxsIHRoZSAncnN0dWRpb2FwaTo6YXNrRm9yUGFzc3dvcmQnIGZ1bmN0aW9uLg0KDQpTbywgSSBuZWVkZWQgYSB3YXkgdG8gKipzZWN1cmVseSoqIGNvbm5lY3QgdG8gbXkgZGF0YWJhc2UgZnJvbSBhICoqb3BlbiBzb3VyY2UqKiBSTWFya2Rvd24gZG9jdW1lbnQuDQoNCkVudGVyIHRoZSBncmVhdCAoYnV0IHN1cnByaXNpbmdseSBub3QgdGhlIHRvcCByZXN1bHQgb24gR29vZ2xlKSBbUlN0dWRpbyBkb2N1bWVudGF0aW9uXShodHRwczovL2RiLnJzdHVkaW8uY29tL2Jlc3QtcHJhY3RpY2VzL21hbmFnaW5nLWNyZWRlbnRpYWxzLykuIEl0IGxpc3RzICdJbnRlZ3JhdGVkIFNlY3VyaXR5IHdpdGggRFNOJyBhcyB0aGUgdG9wIG1ldGhvZCBmb3Igc2VjdXJpbmcgeW91ciBkYXRhYmFzZSBjcmVkZW50aWFscy4gQSBxdWljayBzZWFyY2ggZm9yICdyIERTTicgYnJvdWdodCBtZSB0byBbdGhpcyB3ZWJzaXRlXShodHRwczovL3d3dy5yLWJsb2dnZXJzLmNvbS8yMDE4LzA1L3NldHRpbmctdXAtYW4tb2RiYy1jb25uZWN0aW9uLXdpdGgtbXMtc3FsLXNlcnZlci1vbi13aW5kb3dzLykgd2hpY2ggb3V0bGluZWQgaG93IEkgY291bGQgc2V0dXAgYW4gJ2FsaWFzJyBmcm9tIHRoZSAnT0RCQyBEYXRhIFNvdXJjZXMnIFdpbmRvd3MgYXBwLiBUaGVuIGZyb20gUlN0dWRpbywgSSBjb3VsZCBjYWxsIHRoYXQgRFNOIChEYXRhIFNvdXJjZSBOYW1lKSB1c2luZyB0aGUgYmVsb3cgY29kZToNCg0KYGBge3IgZXZhbHVhdGU9RkFMU0V9DQpsaWJyYXJ5KG9kYmMpDQpjb24gPC0gZGJDb25uZWN0KG9kYmM6Om9kYmMoKSwgZHNuID0gIk5fTXlTUUwiLCBkYj0nYmlrZW9tZXRlcnNfZGInKQ0KYGBgDQoNClRoaXMgd291bGQgYWxsb3cgbWUgdG8gbWFrZSB0aGUgY29ubmVjdGlvbiBmcm9tIHdpdGhpbiBhIHB1Ymxpc2hlZCBSTWFya2Rvd24gZG9jdW1lbnQgd2l0aG91dCBleHBvc2luZyBteSBjcmVkZW50aWFscy4NCg0KSSBjb3VsZCBldmVuICoqc3BlY2lmeSB0aGUgZGF0YWJhc2UqKiBmcm9tIHdpdGhpbiBPREJDIGFuZCBqdXN0IHBhc3MgaW4gdGhlIERTTiBuYW1lIGxpa2UgYmVsb3c6DQoNCmBgYHtyIGV2YWw9RkFMU0V9DQpjb24gPC0gZGJDb25uZWN0KG9kYmM6Om9kYmMoKSwgZHNuID0gIkJpa2VfTXlTUUwiKQ0KYGBgDQoNCiFbXShpbWFnZXMvT0RCQyUyMERhdGElMjBTb3VyY2UlMjBDb25maWcuanBnICJPREJDIGRhdGEgc291cmNlIGNvbmZpZyIpDQoNCkVhc3kgcGVhc3khDQoNCltIZXJlJ3NdKGh0dHBzOi8vY3Jhbi5yLXByb2plY3Qub3JnL3dlYi9wYWNrYWdlcy9odHRyL3ZpZ25ldHRlcy9zZWNyZXRzLmh0bWwpIGEgZ3JlYXQgcG9zdCBieSBIYWRsZXkgV2lja2hhbSB0aGF0IGdvZXMgb3ZlciBkaWZmZXJlbnQgc2NlbmFyaW9zIHdoZW4geW91IG1heSB3YW50IHRvIHN0b3JlICdzZWNyZXRzJyBhbmQgaG93IGJlc3QgdG8gYWNjb21wbGlzaCB0aGVtLg0KDQojIyMgUHl0aG9uIGluIFINCg0KSWYgeW91IGFyZSBpbmNsdWRpbmcgUHl0aG9uIGNvZGUgdG8gYmUgcnVuIHdpdGggdGhlICpyZXRpY3VsYXRlKiBsaWJyYXJ5LCB5b3UgaGF2ZSBhIGZldyBvcHRpb25zIGFuZCBhIGZldyBoZWFkYWNoZXMuDQoNCiMjIyBQeU9EQkMNCg0KUHlPREJDIGlzIGFuIGVhc3kgd2F5IHRvIGFjY2VzcyB5b3VyIGRhdGFiYXNlIHZpYSB5b3VyIERTTiBhbGlhcywgZWxpbWluYXRpbmcgdGhlIG5lZWQgdG8gaGFyZC1jb2RlIHlvdXIgY3JlZGVudGlhbHMuIEhvd2V2ZXIsIEkgY2FuJ3QgZmlndXJlIG91dCBob3cgdG8gbWFrZSBpdCBwbGF5IG5pY2Ugd2l0aCBQYW5kYXMuLi4gc2VlIGJlbG93Lg0KDQojIyMgU1FMQWxjaGVteSArIFBhbmRhcw0KDQpDdXJyZW50bHksIEkgYW0gdXNpbmcgdGhlIFBhbmRhcyBtZXRob2QgLnRvX3NxbCgpIHF1aXRlIGEgbG90IHRvIG1vdmUgbXkgZGF0YWZyYW1lcyBpbnRvIE15U1FMLiBIb3dldmVyLCBQYW5kYXMgcmVxdWlyZXMgYSBTUUxBbGNoZW15ICdlbmdpbmUnIG9iamVjdC4gVG8gY3JlYXRlIHRoaXMgJ2VuZ2luZScgb2JqZWN0IEkgY2FuJ3QgdXNlIG15IERTTiBtZXRob2QgdG8gbWFrZSB0aGUgZGF0YWJhc2UgY29ubmVjdGlvbi4gKipEbyBub3QqKiBoYXJkLWNvZGUgeW91ciBjcmVkZW50aWFscyBsaWtlIGJlbG93Lg0KDQpgYGB7cHl0aG9uIGV2YWw9RkFMU0V9DQplbmdpbmUgPSBjcmVhdGVfZW5naW5lKGYnbXlzcWwrbXlzcWxkYjovL25ld3VzZXI6ZG9udGV2ZW50cnlAbG9jYWxob3N0L2Jpa2VvbWV0ZXJzX2RiJywgZWNobz1GYWxzZSkNCmBgYA0KDQpBZnRlciBzb21lIHJlc2VhcmNoIHRoZXJlIGFyZSBvdGhlciBvcHRpb25zLiBUaGUgbW9zdCBzdHJhaWdodCBmb3J3YXJkIFtvcHRpb25dKGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMzk3OTA1KSBzZWVtZWQgdG8gYmUgc2F2aW5nIHRoZSB1c2VybmFtZSBhbmQgcGFzc3dvcmQgaW4gYSBzZXBhcmF0ZSAucHkgZG9jdW1lbnQgd2hpY2ggSSBjb3VsZCBpbXBvcnQgbGlrZSBzbzoNCg0KYGBge3B5dGhvbiBldmFsPUZBTFNFfQ0KZnJvbSBjb25maWcucHkgaW1wb3J0IHVzZXJuYW1lLCBwYXNzd29yZA0KZW5naW5lID0gY3JlYXRlX2VuZ2luZShmJ215c3FsK215c3FsZGI6Ly97dXNlcm5hbWV9OntwYXNzd29yZH1AbG9jYWxob3N0L2Jpa2VvbWV0ZXJzX2RiJywgZWNobz1GYWxzZSkNCg0KYGBgDQoNCk9idmlvdXNseSwganVzdCBhZGQgdGhpcyBjb25maWcucHkgZG9jdW1lbnQgdG8gdGhlIC5naXRpZ25vcmUgZmlsZSBzbyBpdCB3b250IGdldCB1cGxvYWRlZCB0byBnaXRodWIuDQoNCkFub3RoZXIgW29wdGlvbl0oaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMwNjY0MzE4KSBpcyB0byBzdG9yZSB0aGUgY3JlZGVudGlhbHMgaW4gYW4gZW52aXJvbm1lbnQgdmFyaWFibGUuDQoNCllvdSBjYW4gc2VlIGFsbCB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcyBieSB1c2luZyB0aGUgZm9sbG93aW5nIFIgY29kZToNCg0KYGBge3IgZXZhbD1GQUxTRX0NClN5cy5nZXRlbnYoKQ0KYGBgDQoNClNldCBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZSB1c2luZzoNCg0KYGBge3J9DQpTeXMuc2V0ZW52KHVzZXJuYW1lID0gIm5hdGhhbiIpDQpgYGANCg0KQ2FsbCBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZSB1c2luZzoNCg0KYGBge3J9DQpTeXMuZ2V0ZW52KCd1c2VybmFtZScpDQpgYGANCg0KSW4gUHl0aG9uIHlvdSBjYW4gdXNlICdvcycgbW9kdWxlIHRvIHNldCBhbmQgZ2V0IGVudmlyb25tZW50IHZhcmlhYmxlcy4NCg0KVG8gc2VlIGFsbCBlbnZpcm9ubWVudCB2YXJpYWJsZXM6DQoNCmBgYHtweXRob24gZXZhbD1GQUxTRX0NCmltcG9ydCBvcw0KcHJpbnQob3MuZW52aXJvbikNCmBgYA0KDQpUbyBzZXQgYW4gZW52aXJvbm1lbnQgdmFyaWFibGU6DQpgYGB7cHl0aG9ufQ0Kb3MuZW52aXJvblsndXNlcm5hbWUnXSA9ICduYXRoYW4nDQpgYGANCg0KQ2FsbCBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZSB1c2luZzoNCg0KYGBge3B5dGhvbn0NCm9zLmVudmlyb25bJ3VzZXJuYW1lJ10NCmBgYA0KDQpCb3RoIG9wdGlvbnMgaGF2ZSBtYWpvciBkb3duc2lkZXMgYXMgYW55IG1ldGhvZCB3aGVyZSB5b3UgcmVjb3JkIHlvdXIgY3JlZGVudGlhbHMgaXMgbm90IHZlcnkgc2VjdXJlLiBJZiBJJ20gd29ycnlpbmcgYWJvdXQgYSBiYWQgYWN0b3IgZ2FpbmluZyBhY2Nlc3MgdG8gbXkgY29tcHV0ZXIsIGJvdGggY3JlZGVudGlhbCBzdG9yYWdlIG1ldGhvZHMgbGVhdmUgbWUgdnVsbmVyYWJsZSB3aGlsZSB0aGUgJ2NvbmZpZy5weScgbWV0aG9kIGFkZHMgZXh0cmEgcmlzayBpZiB0aGUgZG9jdW1lbnQgaXMgYWNjaWRlbnRhbGx5IHB1Ymxpc2hlZCB0byBnaXRodWIuDQoNCkFmdGVyIHJlYWRpbmcgb3ZlciB0aGUgYWJvdmUgbGlua2VkIGFydGljbGVzIGFuZCBbdGhpc10oaHR0cHM6Ly93d3cuMTJmYWN0b3IubmV0L2NvbmZpZykgYXJ0aWNsZSwgSSdsbCBjaG9vc2UgdXNpbmcgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIGluIG15IHByb2plY3QncyB2aXJ0dWFsIGVudmlyb25tZW50IGFzIGl0IHJlZHVjZXMgdGhlIHJpc2sgb2YgYWNjaWRlbnRhbGx5IHB1Ymxpc2hpbmcgbXkgcGFzc3dvcmQgdG8gR2l0aHViLiBBZnRlciB0aGUgcHJvamVjdCBpcyBwdWJsaXNoZWQgSSBjYW4gdGhlbiByZW1vdmUgdGhlIHBhc3N3b3JkIGZyb20gdGhlIGVudmlyb25tZW50IHZhcmlhYmxlLg0K</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("note_knit_rmarkdown_db.Rmd");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
