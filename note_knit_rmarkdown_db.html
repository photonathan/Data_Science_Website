<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Publish Rmarkdown Documents With Database Connections Without Exposing Credentials</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link rel="apple-touch-icon" sizes="180x180" href="~/assets/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/favicon/site.webmanifest">
<link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/favicon/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Nathan's Projects</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Visualizing Arlington Bikeometers
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="part_1_the_plan.html">Part 1: The Plan</a>
    </li>
    <li>
      <a href="part_2_query_the_api.html">Part 2: Query the API</a>
    </li>
    <li>
      <a href="part_3_setup_your_database.html">Part 3: Setup and Connect Your Database</a>
    </li>
    <li>
      <a href="part_4_save_the_data_in_a_mysql_database.html">Part 4: Save the Data in Your Local MySQL Database</a>
    </li>
    <li>
      <a href="part_5_picking_bikeometers_to_graph.html">Part 5: Picking Which Bikeometers to Graph</a>
    </li>
    <li>
      <a href="part_6_creating_initial_visualizations.html">Part 6: Creating the Visualizations</a>
    </li>
    <li>
      <a href="part_7_investigating_bikometer_gps_locations.html">Part 7: Investigating Bikeometer GPS Locations</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="note_fixing_rpytools_error.html">Fixing rpytools error</a>
    </li>
    <li>
      <a href="note_knit_rmarkdown_db.html">Publish Rmarkdown Documents With Database Connections Without Exposing Credentials</a>
    </li>
  </ul>
</li>
<li>
  <a href="photography.html">Photography</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/photonathan">Github</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Publish Rmarkdown Documents With Database Connections Without Exposing Credentials</h1>

</div>


<p>   </p>
<div id="how-to" class="section level1">
<h1>How to</h1>
<p>Follow instructions on <a href="https://www.r-bloggers.com/2018/05/setting-up-an-odbc-connection-with-ms-sql-server-on-windows/">this website</a> to create Data Source Name (DSN) that securely stores your connection variables (user, password, connection information) in Windows so that a connection can be made from R just by calling the DSN ‘Alias’.</p>
<div id="r" class="section level3">
<h3>R</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(odbc<span class="sc">::</span><span class="fu">odbc</span>(), <span class="at">dsn =</span> <span class="st">&quot;Bike_MySQL&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>con</span></code></pre></div>
<pre><code>## &lt;OdbcConnection&gt; root@localhost via TCP/IP
##   Database: bikeometers_db
##   MySQL Version: 8.0.23</code></pre>
</div>
<div id="python" class="section level3">
<h3>Python</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sqlalchemy <span class="im">import</span> create_engine</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>engine <span class="op">=</span> create_engine(<span class="ss">f&#39;mysql+mysqldb://</span><span class="sc">{os.</span>environ[<span class="st">&quot;arlington_user&quot;</span>]<span class="sc">}</span><span class="ss">:</span><span class="sc">{os.</span>environ[<span class="st">&quot;arlington_password&quot;</span>]<span class="sc">}</span><span class="ss">@localhost/bikeometers_db&#39;</span>, echo<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>engine.<span class="ex">connect</span>()</span></code></pre></div>
<pre><code>## &lt;sqlalchemy.engine.base.Connection object at 0x000000002E1A39E8&gt;</code></pre>
</div>
</div>
<div id="background" class="section level1">
<h1>Background</h1>
<p>Publishing my finished projects and documenting every line of code I run to complete it is a great way for people to replicate/validate my work and also enables people to learn from my methods. The problem with publishing every line of code is when it’s time to login in to my database, I need a way to hide my credentials.</p>
<div id="r-1" class="section level3">
<h3>R</h3>
<p>Originally, I made the connection using:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(odbc<span class="sc">::</span><span class="fu">odbc</span>(), <span class="at">.connection_string =</span> <span class="st">&quot;Driver={MySQL ODBC 8.0 Unicode Driver};&quot;</span>, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">server =</span> <span class="st">&quot;localhost&quot;</span>, <span class="at">db =</span> <span class="st">&quot;bikeometers_db&quot;</span>, <span class="at">user =</span> <span class="st">&quot;root&quot;</span>, <span class="at">password =</span> rstudioapi<span class="sc">::</span><span class="fu">askForPassword</span>(<span class="st">&quot;Database password&quot;</span>))</span></code></pre></div>
<p>However this requires me to enter in a password each time I wanted to Knit the document. This was only a minor inconvenience when Knitting individual documents but when I wanted to add another post to my website, I couldn’t use the ‘Build Website’ button in RStudio as it wouldn’t call the ‘rstudioapi::askForPassword’ function.</p>
<p>So, I needed a way to <strong>securely</strong> connect to my database from a <strong>open source</strong> RMarkdown document.</p>
<p>Enter the great (but surprisingly not the top result on Google) <a href="https://db.rstudio.com/best-practices/managing-credentials/">RStudio documentation</a>. It lists ‘Integrated Security with DSN’ as the top method for securing your database credentials. A quick search for ‘r DSN’ brought me to <a href="https://www.r-bloggers.com/2018/05/setting-up-an-odbc-connection-with-ms-sql-server-on-windows/">this website</a> which outlined how I could setup an ‘alias’ from the ‘ODBC Data Sources’ Windows app. Then from RStudio, I could call that DSN (Data Source Name) using the below code:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(odbc)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(odbc<span class="sc">::</span><span class="fu">odbc</span>(), <span class="at">dsn =</span> <span class="st">&quot;N_MySQL&quot;</span>, <span class="at">db=</span><span class="st">&#39;bikeometers_db&#39;</span>)</span></code></pre></div>
<p>This would allow me to make the connection from within a published RMarkdown document without exposing my credentials.</p>
<p>I could even <strong>specify the database</strong> from within ODBC and just pass in the DSN name like below:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(odbc<span class="sc">::</span><span class="fu">odbc</span>(), <span class="at">dsn =</span> <span class="st">&quot;Bike_MySQL&quot;</span>)</span></code></pre></div>
<p><img src="images/ODBC%20Data%20Source%20Config.jpg" title="ODBC data source config" /></p>
<p>Easy peasy!</p>
<p><a href="https://cran.r-project.org/web/packages/httr/vignettes/secrets.html">Here’s</a> a great post by Hadley Wickham that goes over different scenarios when you may want to store ‘secrets’ and how best to accomplish them.</p>
</div>
<div id="python-in-r" class="section level3">
<h3>Python in R</h3>
<p>If you are including Python code to be run with the <em>reticulate</em> library, you have a few options and a few headaches.</p>
</div>
<div id="pyodbc" class="section level3">
<h3>PyODBC</h3>
<p>PyODBC is an easy way to access your database via your DSN alias, eliminating the need to hard-code your credentials. However, I can’t figure out how to make it play nice with Pandas… see below.</p>
</div>
<div id="sqlalchemy-pandas" class="section level3">
<h3>SQLAlchemy + Pandas</h3>
<p>Currently, I am using the Pandas method .to_sql() quite a lot to move my dataframes into MySQL. However, Pandas requires a SQLAlchemy ‘engine’ object. To create this ‘engine’ object I can’t use my DSN method to make the database connection. <strong>Do not</strong> hard-code your credentials like below.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>engine <span class="op">=</span> create_engine(<span class="ss">f&#39;mysql+mysqldb://newuser:donteventry@localhost/bikeometers_db&#39;</span>, echo<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<p>After some research there are other options. The most straight forward <a href="https://stackoverflow.com/a/2397905">option</a> seemed to be saving the username and password in a separate .py document which I could import like so:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> config.py <span class="im">import</span> username, password</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>engine <span class="op">=</span> create_engine(<span class="ss">f&#39;mysql+mysqldb://</span><span class="sc">{</span>username<span class="sc">}</span><span class="ss">:</span><span class="sc">{</span>password<span class="sc">}</span><span class="ss">@localhost/bikeometers_db&#39;</span>, echo<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<p>Obviously, just add this config.py document to the .gitignore file so it wont get uploaded to github.</p>
<p>Another <a href="https://stackoverflow.com/a/30664318">option</a> is to store the credentials in an environment variable.</p>
<p>You can see all your environment variables by using the following R code:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.getenv</span>()</span></code></pre></div>
<p>Set an environment variable using:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">username =</span> <span class="st">&quot;nathan&quot;</span>)</span></code></pre></div>
<p>Call an environment variable using:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.getenv</span>(<span class="st">&#39;username&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;nathan&quot;</code></pre>
<p>In Python you can use ‘os’ module to set and get environment variables.</p>
<p>To see all environment variables:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(os.environ)</span></code></pre></div>
<p>To set an environment variable:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>os.environ[<span class="st">&#39;username&#39;</span>] <span class="op">=</span> <span class="st">&#39;nathan&#39;</span></span></code></pre></div>
<p>Call an environment variable using:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>os.environ[<span class="st">&#39;username&#39;</span>]</span></code></pre></div>
<pre><code>## &#39;nathan&#39;</code></pre>
<p>Both options have major downsides as any method where you record your credentials is not very secure. If I’m worrying about a bad actor gaining access to my computer, both credential storage methods leave me vulnerable while the ‘config.py’ method adds extra risk if the document is accidentally published to github.</p>
<p>After reading over the above linked articles and <a href="https://www.12factor.net/config">this</a> article, I’ll choose using the environment variable in my project’s virtual environment as it reduces the risk of accidentally publishing my password to Github. After the project is published I can then remove the password from the environment variable.</p>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIlB1Ymxpc2ggUm1hcmtkb3duIERvY3VtZW50cyBXaXRoIERhdGFiYXNlIENvbm5lY3Rpb25zIFdpdGhvdXQgRXhwb3NpbmcgQ3JlZGVudGlhbHMiDQpvdXRwdXQ6DQogIGh0bWxfZG9jdW1lbnQ6IA0KICAgIGhpZ2hsaWdodDogemVuYnVybg0KICAgIGNvZGVfZG93bmxvYWQ6IHRydWUNCiAgICBpbmNsdWRlczoNCiAgICAgIGluX2hlYWRlcjogaGVhZGVyLmh0bWwNCi0tLQ0KXCANClwgDQoNCiMgSG93IHRvDQoNCkZvbGxvdyBpbnN0cnVjdGlvbnMgb24gW3RoaXMgd2Vic2l0ZV0oaHR0cHM6Ly93d3cuci1ibG9nZ2Vycy5jb20vMjAxOC8wNS9zZXR0aW5nLXVwLWFuLW9kYmMtY29ubmVjdGlvbi13aXRoLW1zLXNxbC1zZXJ2ZXItb24td2luZG93cy8pIHRvIGNyZWF0ZSBEYXRhIFNvdXJjZSBOYW1lIChEU04pIHRoYXQgc2VjdXJlbHkgc3RvcmVzIHlvdXIgY29ubmVjdGlvbiB2YXJpYWJsZXMgKHVzZXIsIHBhc3N3b3JkLCBjb25uZWN0aW9uIGluZm9ybWF0aW9uKSBpbiBXaW5kb3dzIHNvIHRoYXQgYSBjb25uZWN0aW9uIGNhbiBiZSBtYWRlIGZyb20gUiBqdXN0IGJ5IGNhbGxpbmcgdGhlIERTTiAnQWxpYXMnLg0KDQojIyMgUg0KDQpgYGB7cn0NCmxpYnJhcnkoREJJKQ0KY29uIDwtIGRiQ29ubmVjdChvZGJjOjpvZGJjKCksIGRzbiA9ICJCaWtlX015U1FMIikNCmNvbg0KYGBgDQoNCiMjIyBQeXRob24NCg0KYGBge3B5dGhvbn0NCmltcG9ydCBvcw0KZnJvbSBzcWxhbGNoZW15IGltcG9ydCBjcmVhdGVfZW5naW5lDQoNCmVuZ2luZSA9IGNyZWF0ZV9lbmdpbmUoZidteXNxbCtteXNxbGRiOi8ve29zLmVudmlyb25bImFybGluZ3Rvbl91c2VyIl19Ontvcy5lbnZpcm9uWyJhcmxpbmd0b25fcGFzc3dvcmQiXX1AbG9jYWxob3N0L2Jpa2VvbWV0ZXJzX2RiJywgZWNobz1GYWxzZSkNCg0KZW5naW5lLmNvbm5lY3QoKQ0KYGBgDQoNCiMgQmFja2dyb3VuZA0KDQpQdWJsaXNoaW5nIG15IGZpbmlzaGVkIHByb2plY3RzIGFuZCBkb2N1bWVudGluZyBldmVyeSBsaW5lIG9mIGNvZGUgSSBydW4gdG8gY29tcGxldGUgaXQgaXMgYSBncmVhdCB3YXkgZm9yIHBlb3BsZSB0byByZXBsaWNhdGUvdmFsaWRhdGUgbXkgd29yayBhbmQgYWxzbyBlbmFibGVzIHBlb3BsZSB0byBsZWFybiBmcm9tIG15IG1ldGhvZHMuIFRoZSBwcm9ibGVtIHdpdGggcHVibGlzaGluZyBldmVyeSBsaW5lIG9mIGNvZGUgaXMgd2hlbiBpdCdzIHRpbWUgdG8gbG9naW4gaW4gdG8gbXkgZGF0YWJhc2UsIEkgbmVlZCBhIHdheSB0byBoaWRlIG15IGNyZWRlbnRpYWxzLg0KDQojIyMgUg0KDQpPcmlnaW5hbGx5LCBJIG1hZGUgdGhlIGNvbm5lY3Rpb24gdXNpbmc6DQoNCmBgYHtyIGV2YWw9RkFMU0V9DQpjb24gPC0gZGJDb25uZWN0KG9kYmM6Om9kYmMoKSwgLmNvbm5lY3Rpb25fc3RyaW5nID0gIkRyaXZlcj17TXlTUUwgT0RCQyA4LjAgVW5pY29kZSBEcml2ZXJ9OyIsIA0KICAgICAgICAgICAgICAgICBzZXJ2ZXIgPSAibG9jYWxob3N0IiwgZGIgPSAiYmlrZW9tZXRlcnNfZGIiLCB1c2VyID0gInJvb3QiLCBwYXNzd29yZCA9IHJzdHVkaW9hcGk6OmFza0ZvclBhc3N3b3JkKCJEYXRhYmFzZSBwYXNzd29yZCIpKQ0KYGBgDQoNCkhvd2V2ZXIgdGhpcyByZXF1aXJlcyBtZSB0byBlbnRlciBpbiBhIHBhc3N3b3JkIGVhY2ggdGltZSBJIHdhbnRlZCB0byBLbml0IHRoZSBkb2N1bWVudC4gVGhpcyB3YXMgb25seSBhIG1pbm9yIGluY29udmVuaWVuY2Ugd2hlbiBLbml0dGluZyBpbmRpdmlkdWFsIGRvY3VtZW50cyBidXQgd2hlbiBJIHdhbnRlZCB0byBhZGQgYW5vdGhlciBwb3N0IHRvIG15IHdlYnNpdGUsIEkgY291bGRuJ3QgdXNlIHRoZSAnQnVpbGQgV2Vic2l0ZScgYnV0dG9uIGluIFJTdHVkaW8gYXMgaXQgd291bGRuJ3QgY2FsbCB0aGUgJ3JzdHVkaW9hcGk6OmFza0ZvclBhc3N3b3JkJyBmdW5jdGlvbi4NCg0KU28sIEkgbmVlZGVkIGEgd2F5IHRvICoqc2VjdXJlbHkqKiBjb25uZWN0IHRvIG15IGRhdGFiYXNlIGZyb20gYSAqKm9wZW4gc291cmNlKiogUk1hcmtkb3duIGRvY3VtZW50Lg0KDQpFbnRlciB0aGUgZ3JlYXQgKGJ1dCBzdXJwcmlzaW5nbHkgbm90IHRoZSB0b3AgcmVzdWx0IG9uIEdvb2dsZSkgW1JTdHVkaW8gZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9kYi5yc3R1ZGlvLmNvbS9iZXN0LXByYWN0aWNlcy9tYW5hZ2luZy1jcmVkZW50aWFscy8pLiBJdCBsaXN0cyAnSW50ZWdyYXRlZCBTZWN1cml0eSB3aXRoIERTTicgYXMgdGhlIHRvcCBtZXRob2QgZm9yIHNlY3VyaW5nIHlvdXIgZGF0YWJhc2UgY3JlZGVudGlhbHMuIEEgcXVpY2sgc2VhcmNoIGZvciAnciBEU04nIGJyb3VnaHQgbWUgdG8gW3RoaXMgd2Vic2l0ZV0oaHR0cHM6Ly93d3cuci1ibG9nZ2Vycy5jb20vMjAxOC8wNS9zZXR0aW5nLXVwLWFuLW9kYmMtY29ubmVjdGlvbi13aXRoLW1zLXNxbC1zZXJ2ZXItb24td2luZG93cy8pIHdoaWNoIG91dGxpbmVkIGhvdyBJIGNvdWxkIHNldHVwIGFuICdhbGlhcycgZnJvbSB0aGUgJ09EQkMgRGF0YSBTb3VyY2VzJyBXaW5kb3dzIGFwcC4gVGhlbiBmcm9tIFJTdHVkaW8sIEkgY291bGQgY2FsbCB0aGF0IERTTiAoRGF0YSBTb3VyY2UgTmFtZSkgdXNpbmcgdGhlIGJlbG93IGNvZGU6DQoNCmBgYHtyIGV2YWx1YXRlPUZBTFNFfQ0KbGlicmFyeShvZGJjKQ0KY29uIDwtIGRiQ29ubmVjdChvZGJjOjpvZGJjKCksIGRzbiA9ICJOX015U1FMIiwgZGI9J2Jpa2VvbWV0ZXJzX2RiJykNCmBgYA0KDQpUaGlzIHdvdWxkIGFsbG93IG1lIHRvIG1ha2UgdGhlIGNvbm5lY3Rpb24gZnJvbSB3aXRoaW4gYSBwdWJsaXNoZWQgUk1hcmtkb3duIGRvY3VtZW50IHdpdGhvdXQgZXhwb3NpbmcgbXkgY3JlZGVudGlhbHMuDQoNCkkgY291bGQgZXZlbiAqKnNwZWNpZnkgdGhlIGRhdGFiYXNlKiogZnJvbSB3aXRoaW4gT0RCQyBhbmQganVzdCBwYXNzIGluIHRoZSBEU04gbmFtZSBsaWtlIGJlbG93Og0KDQpgYGB7ciBldmFsPUZBTFNFfQ0KY29uIDwtIGRiQ29ubmVjdChvZGJjOjpvZGJjKCksIGRzbiA9ICJCaWtlX015U1FMIikNCmBgYA0KDQohW10oaW1hZ2VzL09EQkMlMjBEYXRhJTIwU291cmNlJTIwQ29uZmlnLmpwZyAiT0RCQyBkYXRhIHNvdXJjZSBjb25maWciKQ0KDQpFYXN5IHBlYXN5IQ0KDQpbSGVyZSdzXShodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvcGFja2FnZXMvaHR0ci92aWduZXR0ZXMvc2VjcmV0cy5odG1sKSBhIGdyZWF0IHBvc3QgYnkgSGFkbGV5IFdpY2toYW0gdGhhdCBnb2VzIG92ZXIgZGlmZmVyZW50IHNjZW5hcmlvcyB3aGVuIHlvdSBtYXkgd2FudCB0byBzdG9yZSAnc2VjcmV0cycgYW5kIGhvdyBiZXN0IHRvIGFjY29tcGxpc2ggdGhlbS4NCg0KIyMjIFB5dGhvbiBpbiBSDQoNCklmIHlvdSBhcmUgaW5jbHVkaW5nIFB5dGhvbiBjb2RlIHRvIGJlIHJ1biB3aXRoIHRoZSAqcmV0aWN1bGF0ZSogbGlicmFyeSwgeW91IGhhdmUgYSBmZXcgb3B0aW9ucyBhbmQgYSBmZXcgaGVhZGFjaGVzLg0KDQojIyMgUHlPREJDDQoNClB5T0RCQyBpcyBhbiBlYXN5IHdheSB0byBhY2Nlc3MgeW91ciBkYXRhYmFzZSB2aWEgeW91ciBEU04gYWxpYXMsIGVsaW1pbmF0aW5nIHRoZSBuZWVkIHRvIGhhcmQtY29kZSB5b3VyIGNyZWRlbnRpYWxzLiBIb3dldmVyLCBJIGNhbid0IGZpZ3VyZSBvdXQgaG93IHRvIG1ha2UgaXQgcGxheSBuaWNlIHdpdGggUGFuZGFzLi4uIHNlZSBiZWxvdy4NCg0KIyMjIFNRTEFsY2hlbXkgKyBQYW5kYXMNCg0KQ3VycmVudGx5LCBJIGFtIHVzaW5nIHRoZSBQYW5kYXMgbWV0aG9kIC50b19zcWwoKSBxdWl0ZSBhIGxvdCB0byBtb3ZlIG15IGRhdGFmcmFtZXMgaW50byBNeVNRTC4gSG93ZXZlciwgUGFuZGFzIHJlcXVpcmVzIGEgU1FMQWxjaGVteSAnZW5naW5lJyBvYmplY3QuIFRvIGNyZWF0ZSB0aGlzICdlbmdpbmUnIG9iamVjdCBJIGNhbid0IHVzZSBteSBEU04gbWV0aG9kIHRvIG1ha2UgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb24uICoqRG8gbm90KiogaGFyZC1jb2RlIHlvdXIgY3JlZGVudGlhbHMgbGlrZSBiZWxvdy4NCg0KYGBge3B5dGhvbiBldmFsPUZBTFNFfQ0KZW5naW5lID0gY3JlYXRlX2VuZ2luZShmJ215c3FsK215c3FsZGI6Ly9uZXd1c2VyOmRvbnRldmVudHJ5QGxvY2FsaG9zdC9iaWtlb21ldGVyc19kYicsIGVjaG89RmFsc2UpDQpgYGANCg0KQWZ0ZXIgc29tZSByZXNlYXJjaCB0aGVyZSBhcmUgb3RoZXIgb3B0aW9ucy4gVGhlIG1vc3Qgc3RyYWlnaHQgZm9yd2FyZCBbb3B0aW9uXShodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjM5NzkwNSkgc2VlbWVkIHRvIGJlIHNhdmluZyB0aGUgdXNlcm5hbWUgYW5kIHBhc3N3b3JkIGluIGEgc2VwYXJhdGUgLnB5IGRvY3VtZW50IHdoaWNoIEkgY291bGQgaW1wb3J0IGxpa2Ugc286DQoNCmBgYHtweXRob24gZXZhbD1GQUxTRX0NCmZyb20gY29uZmlnLnB5IGltcG9ydCB1c2VybmFtZSwgcGFzc3dvcmQNCmVuZ2luZSA9IGNyZWF0ZV9lbmdpbmUoZidteXNxbCtteXNxbGRiOi8ve3VzZXJuYW1lfTp7cGFzc3dvcmR9QGxvY2FsaG9zdC9iaWtlb21ldGVyc19kYicsIGVjaG89RmFsc2UpDQoNCmBgYA0KDQpPYnZpb3VzbHksIGp1c3QgYWRkIHRoaXMgY29uZmlnLnB5IGRvY3VtZW50IHRvIHRoZSAuZ2l0aWdub3JlIGZpbGUgc28gaXQgd29udCBnZXQgdXBsb2FkZWQgdG8gZ2l0aHViLg0KDQpBbm90aGVyIFtvcHRpb25dKGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMDY2NDMxOCkgaXMgdG8gc3RvcmUgdGhlIGNyZWRlbnRpYWxzIGluIGFuIGVudmlyb25tZW50IHZhcmlhYmxlLg0KDQpZb3UgY2FuIHNlZSBhbGwgeW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYnkgdXNpbmcgdGhlIGZvbGxvd2luZyBSIGNvZGU6DQoNCmBgYHtyIGV2YWw9RkFMU0V9DQpTeXMuZ2V0ZW52KCkNCmBgYA0KDQpTZXQgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUgdXNpbmc6DQoNCmBgYHtyfQ0KU3lzLnNldGVudih1c2VybmFtZSA9ICJuYXRoYW4iKQ0KYGBgDQoNCkNhbGwgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUgdXNpbmc6DQoNCmBgYHtyfQ0KU3lzLmdldGVudigndXNlcm5hbWUnKQ0KYGBgDQoNCkluIFB5dGhvbiB5b3UgY2FuIHVzZSAnb3MnIG1vZHVsZSB0byBzZXQgYW5kIGdldCBlbnZpcm9ubWVudCB2YXJpYWJsZXMuDQoNClRvIHNlZSBhbGwgZW52aXJvbm1lbnQgdmFyaWFibGVzOg0KDQpgYGB7cHl0aG9uIGV2YWw9RkFMU0V9DQppbXBvcnQgb3MNCnByaW50KG9zLmVudmlyb24pDQpgYGANCg0KVG8gc2V0IGFuIGVudmlyb25tZW50IHZhcmlhYmxlOg0KYGBge3B5dGhvbn0NCm9zLmVudmlyb25bJ3VzZXJuYW1lJ10gPSAnbmF0aGFuJw0KYGBgDQoNCkNhbGwgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUgdXNpbmc6DQoNCmBgYHtweXRob259DQpvcy5lbnZpcm9uWyd1c2VybmFtZSddDQpgYGANCg0KQm90aCBvcHRpb25zIGhhdmUgbWFqb3IgZG93bnNpZGVzIGFzIGFueSBtZXRob2Qgd2hlcmUgeW91IHJlY29yZCB5b3VyIGNyZWRlbnRpYWxzIGlzIG5vdCB2ZXJ5IHNlY3VyZS4gSWYgSSdtIHdvcnJ5aW5nIGFib3V0IGEgYmFkIGFjdG9yIGdhaW5pbmcgYWNjZXNzIHRvIG15IGNvbXB1dGVyLCBib3RoIGNyZWRlbnRpYWwgc3RvcmFnZSBtZXRob2RzIGxlYXZlIG1lIHZ1bG5lcmFibGUgd2hpbGUgdGhlICdjb25maWcucHknIG1ldGhvZCBhZGRzIGV4dHJhIHJpc2sgaWYgdGhlIGRvY3VtZW50IGlzIGFjY2lkZW50YWxseSBwdWJsaXNoZWQgdG8gZ2l0aHViLg0KDQpBZnRlciByZWFkaW5nIG92ZXIgdGhlIGFib3ZlIGxpbmtlZCBhcnRpY2xlcyBhbmQgW3RoaXNdKGh0dHBzOi8vd3d3LjEyZmFjdG9yLm5ldC9jb25maWcpIGFydGljbGUsIEknbGwgY2hvb3NlIHVzaW5nIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbiBteSBwcm9qZWN0J3MgdmlydHVhbCBlbnZpcm9ubWVudCBhcyBpdCByZWR1Y2VzIHRoZSByaXNrIG9mIGFjY2lkZW50YWxseSBwdWJsaXNoaW5nIG15IHBhc3N3b3JkIHRvIEdpdGh1Yi4gQWZ0ZXIgdGhlIHByb2plY3QgaXMgcHVibGlzaGVkIEkgY2FuIHRoZW4gcmVtb3ZlIHRoZSBwYXNzd29yZCBmcm9tIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZS4NCg==</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("note_knit_rmarkdown_db.Rmd");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
