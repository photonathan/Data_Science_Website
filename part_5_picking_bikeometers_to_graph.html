<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Visualizing Arlington Bikometers</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link rel="apple-touch-icon" sizes="180x180" href="~/assets/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/favicon/site.webmanifest">
<link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/favicon/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-sm-12 col-md-4 col-lg-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-sm-12 col-md-8 col-lg-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Nathan's Projects</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Visualizing Arlington Bikeometers
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="part_1_the_plan.html">Part 1: The Plan</a>
    </li>
    <li>
      <a href="part_2_query_the_api.html">Part 2: Query the API</a>
    </li>
    <li>
      <a href="part_3_setup_your_database.html">Part 3: Setup and Connect Your Database</a>
    </li>
    <li>
      <a href="part_4_save_the_data_in_a_mysql_database.html">Part 4: Save the Data in Your Local MySQL Database</a>
    </li>
    <li>
      <a href="part_5_picking_bikeometers_to_graph.html">Part 5: Picking Which Bikeometers to Graph</a>
    </li>
    <li>
      <a href="part_6_creating_initial_visualizations.html">Part 6: Creating the Initial Visualizations</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="note_fixing_rpytools_error.html">Fixing rpytools error</a>
    </li>
    <li>
      <a href="note_knit_rmarkdown_db.html">Publish Rmarkdown Documents With Database Connections Without Exposing Credentials</a>
    </li>
  </ul>
</li>
<li>
  <a href="photography.html">Photography</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/photonathan">Github</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Visualizing Arlington Bikometers</h1>
<h3 class="subtitle">Part 5: Picking Which Bikeometers to Graph</h3>

</div>


<div id="goal" class="section level1">
<h1>Goal</h1>
<p>Determine which Bikeometers to include in our visualization. Bikeometers will be excluded if they are missing data in the time range we are exploring. Bikeometers were also excluded if they were not in the Arlington region.</p>
</div>
<div id="import-the-table" class="section level1">
<h1>Import the table</h1>
<p>We will start by importing the necessary packages and establishing a connection to the database.</p>
<p>If you’ve been following along with the previous posts, you’ll notice my connection between R and MySQL has changed. Instead of defining every parameter of the odbc connection each time I wanted to connect, I can instead create a DSN from the odbc app in Windows. To read about why I chose a DSN, check out <a href="https://nathansprojects.com/note_knit_rmarkdown_db.html">this post</a></p>
<p>Next, we can use the dplyr function tbl(), pass in the connection object <em>con</em> and the name of the table we want to look at ‘counts_daily’. This will create a ‘lazy table’, importing only the first 10 rows. You can tell the entire table has not been imported because instead of listing the number of rows, it lists: ‘Source: table<counts_daily> [?? x 9]’</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imports to a lazy table</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>counts_daily <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">&#39;counts_daily&#39;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>counts_daily</span></code></pre></div>
<pre><code>## Warning in `*.integer64`((x[equal] - y[equal]), 2^-l2x[equal]): NAs produced by
## integer64 overflow</code></pre>
<pre><code>## # Source:   table&lt;counts_daily&gt; [?? x 9]
## # Database: mysql [root@:/bikeometers_db]
##    bikeometer_id date       direction count is_weekend    year   month     day
##            &lt;int&gt; &lt;date&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;int64&gt; &lt;int64&gt; &lt;int64&gt; &lt;int64&gt;
##  1             3 2010-12-08 I         16             0    2010      12       8
##  2             3 2010-12-08 O         96             0    2010      12       8
##  3             3 2010-12-09 I         297            0    2010      12       9
##  4             3 2010-12-09 O         135            0    2010      12       9
##  5             3 2010-12-10 I         189            0    2010      12      10
##  6             3 2010-12-10 O         157            0    2010      12      10
##  7             3 2010-12-11 I         164            1    2010      12      11
##  8             3 2010-12-11 O         122            1    2010      12      11
##  9             3 2010-12-12 I         15             1    2010      12      12
## 10             3 2010-12-12 O         18             1    2010      12      12
## # ... with more rows, and 1 more variable: month_day &lt;chr&gt;</code></pre>
<p>The MnDOT combines directions ‘I’ and ‘O’ together so let’s do that now.</p>
</div>
<div id="combine-i-and-o-values" class="section level1">
<h1>Combine I and O values</h1>
<p>In order to create our new ‘combined’ table, we want ‘date = 2010-12-08, bikeometer_id=3, direction=I’ combined with ‘date = 2010-12-08, bikeometer_id=3, direction=O’. In order to do this, we will need to group our observations not only by date, but also by bikeometer_id. Remember, there are many observations with date=2010-12-08 as each Bikeometer may have data for that date.</p>
<p>We will pipe our counts_daily table into the group_by() and summarize() functions found in the <em>dplyr</em> package. To combine the ‘I’ and ‘O’ counts we will use the function sum() then just specify the other variables we want to include in our new <em>counts_daily_total</em> table.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>counts_daily_total <span class="ot">&lt;-</span> counts_daily <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date, bikeometer_id) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">sum</span>(count), <span class="at">is_weekend =</span> is_weekend, </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">month =</span> month, <span class="at">day =</span> day, <span class="at">year =</span> year, <span class="at">month_day =</span> month_day) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect</span>()</span></code></pre></div>
<pre><code>## Warning: Missing values are always removed in SQL.
## Use `SUM(x, na.rm = TRUE)` to silence this warning
## This warning is displayed only once per session.</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;date&#39;. You can override using the `.groups` argument.</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>counts_daily_total</span></code></pre></div>
<pre><code>## Warning in `*.integer64`((x[equal] - y[equal]), 2^-l2x[equal]): NAs produced by
## integer64 overflow</code></pre>
<pre><code>## # A tibble: 57,271 x 8
## # Groups:   date [3,313]
##    date       bikeometer_id count is_weekend   month     day    year month_day
##    &lt;date&gt;             &lt;int&gt; &lt;dbl&gt;    &lt;int64&gt; &lt;int64&gt; &lt;int64&gt; &lt;int64&gt; &lt;chr&gt;    
##  1 2010-12-08             3   112          0      12       8    2010 12_8     
##  2 2010-12-09             3   432          0      12       9    2010 12_9     
##  3 2010-12-10             3   346          0      12      10    2010 12_10    
##  4 2010-12-11             3   286          1      12      11    2010 12_11    
##  5 2010-12-12             3    33          1      12      12    2010 12_12    
##  6 2010-12-13             3   195          0      12      13    2010 12_13    
##  7 2010-12-14             3   183          0      12      14    2010 12_14    
##  8 2010-12-15             3   187          0      12      15    2010 12_15    
##  9 2010-12-16             3    96          0      12      16    2010 12_16    
## 10 2010-12-17             3    29          0      12      17    2010 12_17    
## # ... with 57,261 more rows</code></pre>
<p>To do a quick check, we can add the ‘I’ and ‘O’ values for bikeometer_id=3, date=2010-12-08 (16+96=112). Looking at our new table, we can look at the first observation to see that it worked.</p>
<p>Even though it isn’t mentioned in the Bike Arlington documentation, it’s important to account for the ‘A’ direction. When the Bikeometer can’t distinguish between outbound and inbound directions, the direction is classified as ‘A’.</p>
<p>Let’s use Bikeometer 14 as an example and check to make sure our ‘A’ <em>counts</em> have been properly moved over to our table.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>counts_daily_a <span class="ot">&lt;-</span> counts_daily_total <span class="sc">%&gt;%</span> <span class="fu">filter</span>(bikeometer_id <span class="sc">==</span> <span class="st">&#39;14&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">collect</span>()</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>counts_daily_a</span></code></pre></div>
<pre><code>## Warning in `*.integer64`((x[equal] - y[equal]), 2^-l2x[equal]): NAs produced by
## integer64 overflow</code></pre>
<pre><code>## # A tibble: 1,576 x 8
## # Groups:   date [1,576]
##    date       bikeometer_id count is_weekend   month     day    year month_day
##    &lt;date&gt;             &lt;int&gt; &lt;dbl&gt;    &lt;int64&gt; &lt;int64&gt; &lt;int64&gt; &lt;int64&gt; &lt;chr&gt;    
##  1 2012-12-04            14    73          0      12       4    2012 12_4     
##  2 2012-12-05            14   105          0      12       5    2012 12_5     
##  3 2012-12-06            14    84          0      12       6    2012 12_6     
##  4 2012-12-07            14    59          0      12       7    2012 12_7     
##  5 2012-12-08            14    96          1      12       8    2012 12_8     
##  6 2012-12-09            14    42          1      12       9    2012 12_9     
##  7 2012-12-10            14   104          0      12      10    2012 12_10    
##  8 2012-12-11            14    91          0      12      11    2012 12_11    
##  9 2012-12-12            14    78          0      12      12    2012 12_12    
## 10 2012-12-13            14   114          0      12      13    2012 12_13    
## # ... with 1,566 more rows</code></pre>
<p>Next, we will confirm that these counts match the counts in the original <em>counts_daily</em> table.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>counts_daily_a <span class="ot">&lt;-</span> counts_daily <span class="sc">%&gt;%</span> <span class="fu">filter</span>(bikeometer_id <span class="sc">==</span> <span class="st">&#39;14&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">collect</span>()</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>counts_daily_a</span></code></pre></div>
<pre><code>## Warning in `*.integer64`((x[equal] - y[equal]), 2^-l2x[equal]): NAs produced by
## integer64 overflow</code></pre>
<pre><code>## # A tibble: 1,580 x 9
##    bikeometer_id date       direction count is_weekend    year   month     day
##            &lt;int&gt; &lt;date&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;int64&gt; &lt;int64&gt; &lt;int64&gt; &lt;int64&gt;
##  1            14 2012-12-04 A         73             0    2012      12       4
##  2            14 2012-12-05 A         105            0    2012      12       5
##  3            14 2012-12-06 A         84             0    2012      12       6
##  4            14 2012-12-07 A         59             0    2012      12       7
##  5            14 2012-12-08 A         96             1    2012      12       8
##  6            14 2012-12-09 A         42             1    2012      12       9
##  7            14 2012-12-10 A         104            0    2012      12      10
##  8            14 2012-12-11 A         91             0    2012      12      11
##  9            14 2012-12-12 A         78             0    2012      12      12
## 10            14 2012-12-13 A         114            0    2012      12      13
## # ... with 1,570 more rows, and 1 more variable: month_day &lt;chr&gt;</code></pre>
<p>The only difference is that we lost the <em>direction</em> variable in our <em>counts_daily_total</em> table which we don’t need anymore.</p>
</div>
<div id="creating-the-inital-visualizations" class="section level1">
<h1>Creating the inital visualizations</h1>
<p>This is where our hard work will start to pay off. Let’s use the date’s we chose in Part 1 (March 12 - May 15), pick a Bikeometer (28), and create a graph.</p>
<p>First, we will filter our data. We will pipe our <em>counts_daily_total</em> table into the <em>dplyr:filter</em> function to subset rows using column values.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>counts_daily_filtered <span class="ot">&lt;-</span> counts_daily_total <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="st">&#39;2017-03-12&#39;</span> <span class="sc">&amp;</span> date <span class="sc">&lt;=</span> <span class="st">&#39;2017-05-15&#39;</span> <span class="sc">&amp;</span> bikeometer_id <span class="sc">==</span> <span class="st">&#39;28&#39;</span><span class="sc">|</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>         date <span class="sc">&gt;=</span> <span class="st">&#39;2018-03-12&#39;</span> <span class="sc">&amp;</span> date <span class="sc">&lt;=</span> <span class="st">&#39;2018-05-15&#39;</span> <span class="sc">&amp;</span> bikeometer_id <span class="sc">==</span> <span class="st">&#39;28&#39;</span><span class="sc">|</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>         date <span class="sc">&gt;=</span> <span class="st">&#39;2019-03-12&#39;</span> <span class="sc">&amp;</span> date <span class="sc">&lt;=</span> <span class="st">&#39;2019-05-15&#39;</span> <span class="sc">&amp;</span> bikeometer_id <span class="sc">==</span> <span class="st">&#39;28&#39;</span><span class="sc">|</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>         date <span class="sc">&gt;=</span> <span class="st">&#39;2020-03-12&#39;</span> <span class="sc">&amp;</span> date <span class="sc">&lt;=</span> <span class="st">&#39;2020-05-15&#39;</span> <span class="sc">&amp;</span> bikeometer_id <span class="sc">==</span> <span class="st">&#39;28&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## Warning in `*.integer64`((x[equal] - y[equal]), 2^-l2x[equal]): NAs produced by
## integer64 overflow</code></pre>
<pre><code>## # A tibble: 240 x 8
## # Groups:   date [240]
##    date       bikeometer_id count is_weekend   month     day    year month_day
##    &lt;date&gt;             &lt;int&gt; &lt;dbl&gt;    &lt;int64&gt; &lt;int64&gt; &lt;int64&gt; &lt;int64&gt; &lt;chr&gt;    
##  1 2017-04-01            28   611          1       4       1    2017 4_1      
##  2 2017-04-02            28  1213          1       4       2    2017 4_2      
##  3 2017-04-03            28  1142          0       4       3    2017 4_3      
##  4 2017-04-04            28  1344          0       4       4    2017 4_4      
##  5 2017-04-05            28  1548          0       4       5    2017 4_5      
##  6 2017-04-06            28   377          0       4       6    2017 4_6      
##  7 2017-04-07            28   382          0       4       7    2017 4_7      
##  8 2017-04-08            28   705          1       4       8    2017 4_8      
##  9 2017-04-09            28  1361          1       4       9    2017 4_9      
## 10 2017-04-10            28  1444          0       4      10    2017 4_10     
## # ... with 230 more rows</code></pre>
<p>Another way to do this is to use the <strong>dbGetQuery()</strong> function in the <em>DBI</em> package. We can pass in the MySQL SELECT statement directly to the dbGetQuery() function along with the connection object to return our desired table.</p>
<p>Using head(my_table), I was able to view the top 6 rows of my_filtered_table directly in R.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>sql_cmd <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * FROM bikeometers_db.counts_daily WHERE bikeometer_id = 28 AND </span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="st">date &gt;= &#39;2020-03-12&#39; AND date &lt;= &#39;2020-05-15&#39; ORDER BY count desc&quot;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># creates a lazy table</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>my_filtered_table <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, sql_cmd)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># displays the top 6 rows</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(my_filtered_table)</span></code></pre></div>
<pre><code>##   bikeometer_id       date direction count is_weekend year month day month_day
## 1            28 2020-04-25         O   970          1 2020     4  25      4_25
## 2            28 2020-05-10         O   926          1 2020     5  10      5_10
## 3            28 2020-03-29         O   882          1 2020     3  29      3_29
## 4            28 2020-05-15         O   851          0 2020     5  15      5_15
## 5            28 2020-04-29         O   760          0 2020     4  29      4_29
## 6            28 2020-04-11         O   758          1 2020     4  11      4_11</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># When you are done, run: dbDisconnect(con)</span></span></code></pre></div>
<p><strong>Now</strong> we can create a plot! We will pipe our counts_daily_filtered table into the <em>ggplot</em> package, define the aesthetics, and call the geom_point() function to make a scatterplot.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>counts_daily_filtered <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(date, count)) <span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="part_5_picking_bikeometers_to_graph_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Very cool! Let’s see what the actual highest counts are by sorting the rows by descending ‘counts’.</p>
</div>
<div id="order-by-descending-counts" class="section level1">
<h1>Order by descending counts</h1>
<p>We can use the dplyr function <em>arrange()</em>, specify the variable name (count) and specify to sort in descending order.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>counts_daily_filtered <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(count))</span></code></pre></div>
<pre><code>## Warning in `*.integer64`((x[equal] - y[equal]), 2^-l2x[equal]): NAs produced by
## integer64 overflow</code></pre>
<pre><code>## # A tibble: 240 x 8
## # Groups:   date [240]
##    date       bikeometer_id count is_weekend   month     day    year month_day
##    &lt;date&gt;             &lt;int&gt; &lt;dbl&gt;    &lt;int64&gt; &lt;int64&gt; &lt;int64&gt; &lt;int64&gt; &lt;chr&gt;    
##  1 2020-05-02            28  2669          1       5       2    2020 5_2      
##  2 2018-05-08            28  1840          0       5       8    2018 5_8      
##  3 2020-04-05            28  1815          1       4       5    2020 4_5      
##  4 2018-05-01            28  1812          0       5       1    2018 5_1      
##  5 2018-05-09            28  1740          0       5       9    2018 5_9      
##  6 2018-05-07            28  1701          0       5       7    2018 5_7      
##  7 2018-05-02            28  1699          0       5       2    2018 5_2      
##  8 2019-04-01            28  1648          0       4       1    2019 4_1      
##  9 2018-04-13            28  1617          0       4      13    2018 4_13     
## 10 2018-04-14            28  1617          1       4      14    2018 4_14     
## # ... with 230 more rows</code></pre>
<p>It looks like on May 2, 2020 there were 2669 bikers recorded by Bikeometer 28.</p>
<p>We can also see that in 2020 there are some dates with 0 bikers recorded. As I’ve chosen to only include Bikometers without missing data, we can eliminate this Bikeometer.</p>
</div>
<div id="function-to-plot-every-bikeometer" class="section level1">
<h1>Function to Plot Every Bikeometer</h1>
<p>To get a better view of the data, we will need to plot every Bikeometer individually.</p>
<p>From what I’ve <a href="https://stackoverflow.com/questions/7142767/why-are-loops-slow-in-r">read</a>, using ‘for loops’ are slow in R but I haven’t been able to find another way to generate plots this easily.</p>
<p>So, we can use a nested <em>for loop</em> to easily generate plots for each counter in the Arlington region. I’ve commented out all but one Bikeometer ID (28) to only generate plots for one Bikeometer for this post, but to test out the code, you can un-comment the rest of the vector to generate all the plots yourself.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (id <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">33</span>)){<span class="co">#28,30,24,59,10,20,18,3,58,61,62,14,60,5,6,27,26,8,7,22,21,9,16,15,31,11,2,25,19)){</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (year <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">2017</span>,<span class="dv">2018</span>,<span class="dv">2019</span>,<span class="dv">2020</span>,<span class="dv">2021</span>)){</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    start_date <span class="ot">&lt;-</span> <span class="fu">paste</span>(year, <span class="st">&#39;-03-12&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;&#39;</span>, <span class="at">collapse =</span> <span class="st">&#39;-&#39;</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    end_date <span class="ot">&lt;-</span> <span class="fu">paste</span>(year, <span class="st">&#39;-05-15&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;&#39;</span>, <span class="at">collapse =</span> <span class="st">&#39;-&#39;</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    counts_daily_filtered <span class="ot">&lt;-</span> counts_daily_total <span class="sc">%&gt;%</span> <span class="fu">filter</span>(date <span class="sc">&gt;=</span> start_date <span class="sc">&amp;</span> date <span class="sc">&lt;=</span> end_date <span class="sc">&amp;</span> bikeometer_id <span class="sc">==</span> id) <span class="sc">%&gt;%</span> <span class="fu">collect</span>()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> counts_daily_filtered <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(date, count)) <span class="sc">+</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">&#39;Daily Bicycle Counts&#39;</span>,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&#39;Year = &#39;</span>, year, <span class="st">&#39;ID = &#39;</span>, id)) <span class="sc">+</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&#39;Date&#39;</span>) <span class="sc">+</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&#39;Counts Daily&#39;</span>) <span class="sc">+</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">vjust =</span> <span class="dv">1</span>),</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&#39;italic&#39;</span>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>      ) </span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(p)</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">#ggsave(filename = paste(&#39;ID &#39;, id, &#39; Year &#39;, year,&#39; counts&#39;, &#39;.jpg&#39;, sep = &#39;&#39;), path = &#39;~/Github/Arlington_Bikeometer_Visualizations/Output&#39;, device = &#39;jpg&#39;, dpi = &#39;retina&#39;)</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>}}</span></code></pre></div>
<p><img src="part_5_picking_bikeometers_to_graph_files/figure-html/unnamed-chunk-10-1.png" width="672" /><img src="part_5_picking_bikeometers_to_graph_files/figure-html/unnamed-chunk-10-2.png" width="672" /><img src="part_5_picking_bikeometers_to_graph_files/figure-html/unnamed-chunk-10-3.png" width="672" /><img src="part_5_picking_bikeometers_to_graph_files/figure-html/unnamed-chunk-10-4.png" width="672" /><img src="part_5_picking_bikeometers_to_graph_files/figure-html/unnamed-chunk-10-5.png" width="672" /></p>
<p>Yes! The plots were generated perfectly. However, our joy is short-lived as we notice big holes in 2019 and 2020 plots.</p>
</div>
<div id="missing-data-or-my-mistake" class="section level1">
<h1>Missing data or my mistake?</h1>
<p>We can see that in 2019 and 2020 there is some missing data. In 2020, there is over a week of 0 counts and in 2019 the counts are just missing.</p>
<p>When I manually queried the <a href="%22http://counters.bikearlington.com/%22">Bike Arlingon web interface</a> for the 2020 dates, there is data in their database with count=0.</p>
<p><a href="http://webservices.commuterpage.com/counters.cfc?wsdl&amp;method=GetCountInDateRange&amp;counterid=33&amp;startDate=03/12/2020&amp;endDate=05/15/2020&amp;direction=I&amp;mode=B&amp;interval=d"><img src="images/id_33_2020_web_query.jpg" title="2020 Web Query" alt="2020 Web Query" /></a></p>
<p>However, for the 2019 missing dates, there was no data available.</p>
<p><a href="http://webservices.commuterpage.com/counters.cfc?wsdl&amp;method=GetCountInDateRange&amp;counterid=33&amp;startDate=03/12/2019&amp;endDate=05/15/2019&amp;direction=I&amp;mode=B&amp;interval=d"><img src="images/id_33_2019_web_query.jpg" title="2019 Web Query" alt="2019 Web Query" /></a></p>
<p>If I were to recreate my database of counts, I would include a clause ‘if there is no data to import for a time-point, count = 0’. The Bike Arlington people probably have a similar clause, which probably prevents the web interface from breaking when a vaild query is made but no data is in the server.</p>
</div>
<div id="choosing-the-bikeometers" class="section level1">
<h1>Choosing the Bikeometers</h1>
<p>After confirming that the missing data wasn’t in the database and looking through the plots of each Bikeometer, I found these Bikeometers without missing data: 14,15,16,18,22,31,39.</p>
</div>
<div id="filling-in-the-missing-data" class="section level1">
<h1>Filling in the missing data?</h1>
<p>The MnDOT released their data quality management procedures in <a href="https://www.dot.state.mn.us/bike-ped-counting/reports/2018-2019%20MinnesotaPedBikeCountReport.pdf">Minnesota’s Walking and Bicycling Data Collection Report Update</a>. Here, they list how they remove outlier, review suspicious data points, create a linear regression model, and use said regression model to <strong>estimate daily traffic for missing days</strong>. In the future, I’d like to preform a similar analysis to fill in the missing data.</p>
<p>The <a href="https://nathansprojects.com/part_6_creating_initial_visualizations.html">next post</a> will be about creating the geom_area plot that matches the <a href="https://storymaps.arcgis.com/stories/70a3a57003b541ed8e911cd11103dc6a">MnDOT’s plot</a>.</p>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIlZpc3VhbGl6aW5nIEFybGluZ3RvbiBCaWtvbWV0ZXJzIg0Kc3VidGl0bGU6ICJQYXJ0IDU6IFBpY2tpbmcgV2hpY2ggQmlrZW9tZXRlcnMgdG8gR3JhcGgiDQpvdXRwdXQ6DQogIGh0bWxfZG9jdW1lbnQ6IA0KICAgIHRvYzogeWVzDQogICAgdG9jX2RlcHRoOiAyDQogICAgdG9jX2Zsb2F0OiB5ZXMNCiAgICBoaWdobGlnaHQ6IHplbmJ1cm4NCiAgICBjb2RlX2Rvd25sb2FkOiB0cnVlDQogICAgaW5jbHVkZXM6DQogICAgICBpbl9oZWFkZXI6IGhlYWRlci5odG1sDQotLS0NCg0KIyBHb2FsDQoNCkRldGVybWluZSB3aGljaCBCaWtlb21ldGVycyB0byBpbmNsdWRlIGluIG91ciB2aXN1YWxpemF0aW9uLiBCaWtlb21ldGVycyB3aWxsIGJlIGV4Y2x1ZGVkIGlmIHRoZXkgYXJlIG1pc3NpbmcgZGF0YSBpbiB0aGUgdGltZSByYW5nZSB3ZSBhcmUgZXhwbG9yaW5nLiBCaWtlb21ldGVycyB3ZXJlIGFsc28gZXhjbHVkZWQgaWYgdGhleSB3ZXJlIG5vdCBpbiB0aGUgQXJsaW5ndG9uIHJlZ2lvbi4NCg0KIyBJbXBvcnQgdGhlIHRhYmxlDQoNCldlIHdpbGwgc3RhcnQgYnkgaW1wb3J0aW5nIHRoZSBuZWNlc3NhcnkgcGFja2FnZXMgYW5kIGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb24gdG8gdGhlIGRhdGFiYXNlLg0KDQpgYGB7ciBlY2hvID0gRkFMU0UsIG1lc3NhZ2UgPSBGQUxTRSwgd2FybmluZz0gRkFMU0V9DQpsaWJyYXJ5KGdncGxvdDIpDQpsaWJyYXJ5KGRwbHlyKQ0KbGlicmFyeShvZGJjKQ0KDQpjb24gPC0gZGJDb25uZWN0KG9kYmM6Om9kYmMoKSwgZHNuID0gIkJpa2VfTXlTUUwiKQ0KYGBgDQoNCklmIHlvdSd2ZSBiZWVuIGZvbGxvd2luZyBhbG9uZyB3aXRoIHRoZSBwcmV2aW91cyBwb3N0cywgeW91J2xsIG5vdGljZSBteSBjb25uZWN0aW9uIGJldHdlZW4gUiBhbmQgTXlTUUwgaGFzIGNoYW5nZWQuIEluc3RlYWQgb2YgZGVmaW5pbmcgZXZlcnkgcGFyYW1ldGVyIG9mIHRoZSBvZGJjIGNvbm5lY3Rpb24gZWFjaCB0aW1lIEkgd2FudGVkIHRvIGNvbm5lY3QsIEkgY2FuIGluc3RlYWQgY3JlYXRlIGEgRFNOIGZyb20gdGhlIG9kYmMgYXBwIGluIFdpbmRvd3MuIFRvIHJlYWQgYWJvdXQgd2h5IEkgY2hvc2UgYSBEU04sIGNoZWNrIG91dCBbdGhpcyBwb3N0XShodHRwczovL25hdGhhbnNwcm9qZWN0cy5jb20vbm90ZV9rbml0X3JtYXJrZG93bl9kYi5odG1sKQ0KDQpOZXh0LCB3ZSBjYW4gdXNlIHRoZSBkcGx5ciBmdW5jdGlvbiB0YmwoKSwgcGFzcyBpbiB0aGUgY29ubmVjdGlvbiBvYmplY3QgKmNvbiogYW5kIHRoZSBuYW1lIG9mIHRoZSB0YWJsZSB3ZSB3YW50IHRvIGxvb2sgYXQgJ2NvdW50c19kYWlseScuIFRoaXMgd2lsbCBjcmVhdGUgYSAnbGF6eSB0YWJsZScsIGltcG9ydGluZyBvbmx5IHRoZSBmaXJzdCAxMCByb3dzLiBZb3UgY2FuIHRlbGwgdGhlIGVudGlyZSB0YWJsZSBoYXMgbm90IGJlZW4gaW1wb3J0ZWQgYmVjYXVzZSBpbnN0ZWFkIG9mIGxpc3RpbmcgdGhlIG51bWJlciBvZiByb3dzLCBpdCBsaXN0czogJ1NvdXJjZTogdGFibGU8Y291bnRzX2RhaWx5PiBbPz8geCA5XScNCg0KYGBge3IgcGFnZWQucHJpbnQ9VFJVRX0NCiMgSW1wb3J0cyB0byBhIGxhenkgdGFibGUNCmNvdW50c19kYWlseSA8LSB0YmwoY29uLCAnY291bnRzX2RhaWx5JykNCmNvdW50c19kYWlseQ0KYGBgDQoNClRoZSBNbkRPVCBjb21iaW5lcyBkaXJlY3Rpb25zICdJJyBhbmQgJ08nIHRvZ2V0aGVyIHNvIGxldCdzIGRvIHRoYXQgbm93Lg0KDQojIENvbWJpbmUgSSBhbmQgTyB2YWx1ZXMNCg0KSW4gb3JkZXIgdG8gY3JlYXRlIG91ciBuZXcgJ2NvbWJpbmVkJyB0YWJsZSwgd2Ugd2FudCAnZGF0ZSA9IDIwMTAtMTItMDgsIGJpa2VvbWV0ZXJfaWQ9MywgZGlyZWN0aW9uPUknIGNvbWJpbmVkIHdpdGggJ2RhdGUgPSAyMDEwLTEyLTA4LCBiaWtlb21ldGVyX2lkPTMsIGRpcmVjdGlvbj1PJy4gSW4gb3JkZXIgdG8gZG8gdGhpcywgd2Ugd2lsbCBuZWVkIHRvIGdyb3VwIG91ciBvYnNlcnZhdGlvbnMgbm90IG9ubHkgYnkgZGF0ZSwgYnV0IGFsc28gYnkgYmlrZW9tZXRlcl9pZC4gUmVtZW1iZXIsIHRoZXJlIGFyZSBtYW55IG9ic2VydmF0aW9ucyB3aXRoIGRhdGU9MjAxMC0xMi0wOCBhcyBlYWNoIEJpa2VvbWV0ZXIgbWF5IGhhdmUgZGF0YSBmb3IgdGhhdCBkYXRlLg0KDQpXZSB3aWxsIHBpcGUgb3VyIGNvdW50c19kYWlseSB0YWJsZSBpbnRvIHRoZSBncm91cF9ieSgpIGFuZCBzdW1tYXJpemUoKSBmdW5jdGlvbnMgZm91bmQgaW4gdGhlICpkcGx5ciogcGFja2FnZS4gVG8gY29tYmluZSB0aGUgJ0knIGFuZCAnTycgY291bnRzIHdlIHdpbGwgdXNlIHRoZSBmdW5jdGlvbiBzdW0oKSB0aGVuIGp1c3Qgc3BlY2lmeSB0aGUgb3RoZXIgdmFyaWFibGVzIHdlIHdhbnQgdG8gaW5jbHVkZSBpbiBvdXIgbmV3ICpjb3VudHNfZGFpbHlfdG90YWwqIHRhYmxlLg0KDQpgYGB7cn0NCmNvdW50c19kYWlseV90b3RhbCA8LSBjb3VudHNfZGFpbHkgJT4lIA0KICBncm91cF9ieShkYXRlLCBiaWtlb21ldGVyX2lkKSAlPiUgDQogIHN1bW1hcml6ZShjb3VudCA9IHN1bShjb3VudCksIGlzX3dlZWtlbmQgPSBpc193ZWVrZW5kLCANCiAgICAgICAgICAgIG1vbnRoID0gbW9udGgsIGRheSA9IGRheSwgeWVhciA9IHllYXIsIG1vbnRoX2RheSA9IG1vbnRoX2RheSkgJT4lIA0KICBjb2xsZWN0KCkNCmNvdW50c19kYWlseV90b3RhbA0KDQpgYGANCg0KVG8gZG8gYSBxdWljayBjaGVjaywgd2UgY2FuIGFkZCB0aGUgJ0knIGFuZCAnTycgdmFsdWVzIGZvciBiaWtlb21ldGVyX2lkPTMsIGRhdGU9MjAxMC0xMi0wOCAoMTYrOTY9MTEyKS4gTG9va2luZyBhdCBvdXIgbmV3IHRhYmxlLCB3ZSBjYW4gbG9vayBhdCB0aGUgZmlyc3Qgb2JzZXJ2YXRpb24gdG8gc2VlIHRoYXQgaXQgd29ya2VkLg0KDQpFdmVuIHRob3VnaCBpdCBpc24ndCBtZW50aW9uZWQgaW4gdGhlIEJpa2UgQXJsaW5ndG9uIGRvY3VtZW50YXRpb24sIGl0J3MgaW1wb3J0YW50IHRvIGFjY291bnQgZm9yIHRoZSAnQScgZGlyZWN0aW9uLiBXaGVuIHRoZSBCaWtlb21ldGVyIGNhbid0IGRpc3Rpbmd1aXNoIGJldHdlZW4gb3V0Ym91bmQgYW5kIGluYm91bmQgZGlyZWN0aW9ucywgdGhlIGRpcmVjdGlvbiBpcyBjbGFzc2lmaWVkIGFzICdBJy4NCg0KTGV0J3MgdXNlIEJpa2VvbWV0ZXIgMTQgYXMgYW4gZXhhbXBsZSBhbmQgY2hlY2sgdG8gbWFrZSBzdXJlIG91ciAnQScgKmNvdW50cyogaGF2ZSBiZWVuIHByb3Blcmx5IG1vdmVkIG92ZXIgdG8gb3VyIHRhYmxlLg0KDQpgYGB7cn0NCmNvdW50c19kYWlseV9hIDwtIGNvdW50c19kYWlseV90b3RhbCAlPiUgZmlsdGVyKGJpa2VvbWV0ZXJfaWQgPT0gJzE0JykgJT4lIGNvbGxlY3QoKQ0KY291bnRzX2RhaWx5X2ENCmBgYA0KDQpOZXh0LCB3ZSB3aWxsIGNvbmZpcm0gdGhhdCB0aGVzZSBjb3VudHMgbWF0Y2ggdGhlIGNvdW50cyBpbiB0aGUgb3JpZ2luYWwgKmNvdW50c19kYWlseSogdGFibGUuDQoNCmBgYHtyfQ0KY291bnRzX2RhaWx5X2EgPC0gY291bnRzX2RhaWx5ICU+JSBmaWx0ZXIoYmlrZW9tZXRlcl9pZCA9PSAnMTQnKSAlPiUgY29sbGVjdCgpDQpjb3VudHNfZGFpbHlfYQ0KYGBgDQoNClRoZSBvbmx5IGRpZmZlcmVuY2UgaXMgdGhhdCB3ZSBsb3N0IHRoZSAqZGlyZWN0aW9uKiB2YXJpYWJsZSBpbiBvdXIgKmNvdW50c19kYWlseV90b3RhbCogdGFibGUgd2hpY2ggd2UgZG9uJ3QgbmVlZCBhbnltb3JlLg0KDQojIENyZWF0aW5nIHRoZSBpbml0YWwgdmlzdWFsaXphdGlvbnMNCg0KVGhpcyBpcyB3aGVyZSBvdXIgaGFyZCB3b3JrIHdpbGwgc3RhcnQgdG8gcGF5IG9mZi4gTGV0J3MgdXNlIHRoZSBkYXRlJ3Mgd2UgY2hvc2UgaW4gUGFydCAxIChNYXJjaCAxMiAtIE1heSAxNSksIHBpY2sgYSBCaWtlb21ldGVyICgyOCksIGFuZCBjcmVhdGUgYSBncmFwaC4NCg0KRmlyc3QsIHdlIHdpbGwgZmlsdGVyIG91ciBkYXRhLiBXZSB3aWxsIHBpcGUgb3VyICpjb3VudHNfZGFpbHlfdG90YWwqIHRhYmxlIGludG8gdGhlICpkcGx5cjpmaWx0ZXIqIGZ1bmN0aW9uIHRvIHN1YnNldCByb3dzIHVzaW5nIGNvbHVtbiB2YWx1ZXMuDQoNCmBgYHtyfQ0KY291bnRzX2RhaWx5X2ZpbHRlcmVkIDwtIGNvdW50c19kYWlseV90b3RhbCAlPiUgDQogIGZpbHRlcihkYXRlID49ICcyMDE3LTAzLTEyJyAmIGRhdGUgPD0gJzIwMTctMDUtMTUnICYgYmlrZW9tZXRlcl9pZCA9PSAnMjgnfCANCiAgICAgICAgIGRhdGUgPj0gJzIwMTgtMDMtMTInICYgZGF0ZSA8PSAnMjAxOC0wNS0xNScgJiBiaWtlb21ldGVyX2lkID09ICcyOCd8DQogICAgICAgICBkYXRlID49ICcyMDE5LTAzLTEyJyAmIGRhdGUgPD0gJzIwMTktMDUtMTUnICYgYmlrZW9tZXRlcl9pZCA9PSAnMjgnfCANCiAgICAgICAgIGRhdGUgPj0gJzIwMjAtMDMtMTInICYgZGF0ZSA8PSAnMjAyMC0wNS0xNScgJiBiaWtlb21ldGVyX2lkID09ICcyOCcpICU+JQ0KICBwcmludCgpDQpgYGANCg0KQW5vdGhlciB3YXkgdG8gZG8gdGhpcyBpcyB0byB1c2UgdGhlICoqZGJHZXRRdWVyeSgpKiogZnVuY3Rpb24gaW4gdGhlICpEQkkqIHBhY2thZ2UuIFdlIGNhbiBwYXNzIGluIHRoZSBNeVNRTCBTRUxFQ1Qgc3RhdGVtZW50IGRpcmVjdGx5IHRvIHRoZSBkYkdldFF1ZXJ5KCkgZnVuY3Rpb24gYWxvbmcgd2l0aCB0aGUgY29ubmVjdGlvbiBvYmplY3QgdG8gcmV0dXJuIG91ciBkZXNpcmVkIHRhYmxlLiANCg0KVXNpbmcgaGVhZChteV90YWJsZSksIEkgd2FzIGFibGUgdG8gdmlldyB0aGUgdG9wIDYgcm93cyBvZiBteV9maWx0ZXJlZF90YWJsZSBkaXJlY3RseSBpbiBSLg0KDQpgYGB7cn0NCnNxbF9jbWQgPC0gIlNFTEVDVCAqIEZST00gYmlrZW9tZXRlcnNfZGIuY291bnRzX2RhaWx5IFdIRVJFIGJpa2VvbWV0ZXJfaWQgPSAyOCBBTkQgDQpkYXRlID49ICcyMDIwLTAzLTEyJyBBTkQgZGF0ZSA8PSAnMjAyMC0wNS0xNScgT1JERVIgQlkgY291bnQgZGVzYyINCiMgY3JlYXRlcyBhIGxhenkgdGFibGUNCm15X2ZpbHRlcmVkX3RhYmxlIDwtIGRiR2V0UXVlcnkoY29uLCBzcWxfY21kKQ0KIyBkaXNwbGF5cyB0aGUgdG9wIDYgcm93cw0KaGVhZChteV9maWx0ZXJlZF90YWJsZSkNCiMgV2hlbiB5b3UgYXJlIGRvbmUsIHJ1bjogZGJEaXNjb25uZWN0KGNvbikNCmBgYA0KDQoNCioqTm93Kiogd2UgY2FuIGNyZWF0ZSBhIHBsb3QhIFdlIHdpbGwgcGlwZSBvdXIgY291bnRzX2RhaWx5X2ZpbHRlcmVkIHRhYmxlIGludG8gdGhlICpnZ3Bsb3QqIHBhY2thZ2UsIGRlZmluZSB0aGUgYWVzdGhldGljcywgYW5kIGNhbGwgdGhlIGdlb21fcG9pbnQoKSBmdW5jdGlvbiB0byBtYWtlIGEgc2NhdHRlcnBsb3QuDQoNCmBgYHtyfQ0KY291bnRzX2RhaWx5X2ZpbHRlcmVkICU+JSBnZ3Bsb3QoYWVzKGRhdGUsIGNvdW50KSkgKw0KICAgIGdlb21fcG9pbnQoKQ0KYGBgDQoNClZlcnkgY29vbCEgTGV0J3Mgc2VlIHdoYXQgdGhlIGFjdHVhbCBoaWdoZXN0IGNvdW50cyBhcmUgYnkgc29ydGluZyB0aGUgcm93cyBieSBkZXNjZW5kaW5nICdjb3VudHMnLg0KDQojIE9yZGVyIGJ5IGRlc2NlbmRpbmcgY291bnRzDQoNCldlIGNhbiB1c2UgdGhlIGRwbHlyIGZ1bmN0aW9uICphcnJhbmdlKCkqLCBzcGVjaWZ5IHRoZSB2YXJpYWJsZSBuYW1lIChjb3VudCkgYW5kIHNwZWNpZnkgdG8gc29ydCBpbiBkZXNjZW5kaW5nIG9yZGVyLg0KDQpgYGB7cn0NCmNvdW50c19kYWlseV9maWx0ZXJlZCAlPiUgYXJyYW5nZShkZXNjKGNvdW50KSkNCmBgYA0KDQpJdCBsb29rcyBsaWtlIG9uIE1heSAyLCAyMDIwIHRoZXJlIHdlcmUgMjY2OSBiaWtlcnMgcmVjb3JkZWQgYnkgQmlrZW9tZXRlciAyOC4NCg0KV2UgY2FuIGFsc28gc2VlIHRoYXQgaW4gMjAyMCB0aGVyZSBhcmUgc29tZSBkYXRlcyB3aXRoIDAgYmlrZXJzIHJlY29yZGVkLiBBcyBJJ3ZlIGNob3NlbiB0byBvbmx5IGluY2x1ZGUgQmlrb21ldGVycyB3aXRob3V0IG1pc3NpbmcgZGF0YSwgd2UgY2FuIGVsaW1pbmF0ZSB0aGlzIEJpa2VvbWV0ZXIuDQoNCiMgRnVuY3Rpb24gdG8gUGxvdCBFdmVyeSBCaWtlb21ldGVyDQoNClRvIGdldCBhIGJldHRlciB2aWV3IG9mIHRoZSBkYXRhLCB3ZSB3aWxsIG5lZWQgdG8gcGxvdCBldmVyeSBCaWtlb21ldGVyIGluZGl2aWR1YWxseS4NCg0KRnJvbSB3aGF0IEkndmUgW3JlYWRdKGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcxNDI3Njcvd2h5LWFyZS1sb29wcy1zbG93LWluLXIpLCB1c2luZyAnZm9yIGxvb3BzJyBhcmUgc2xvdyBpbiBSIGJ1dCBJIGhhdmVuJ3QgYmVlbiBhYmxlIHRvIGZpbmQgYW5vdGhlciB3YXkgdG8gZ2VuZXJhdGUgcGxvdHMgdGhpcyBlYXNpbHkuDQoNClNvLCB3ZSBjYW4gdXNlIGEgbmVzdGVkICpmb3IgbG9vcCogdG8gZWFzaWx5IGdlbmVyYXRlIHBsb3RzIGZvciBlYWNoIGNvdW50ZXIgaW4gdGhlIEFybGluZ3RvbiByZWdpb24uIEkndmUgY29tbWVudGVkIG91dCBhbGwgYnV0IG9uZSBCaWtlb21ldGVyIElEICgyOCkgdG8gb25seSBnZW5lcmF0ZSBwbG90cyBmb3Igb25lIEJpa2VvbWV0ZXIgZm9yIHRoaXMgcG9zdCwgYnV0IHRvIHRlc3Qgb3V0IHRoZSBjb2RlLCB5b3UgY2FuIHVuLWNvbW1lbnQgdGhlIHJlc3Qgb2YgdGhlIHZlY3RvciB0byBnZW5lcmF0ZSBhbGwgdGhlIHBsb3RzIHlvdXJzZWxmLg0KDQpgYGB7ciBtZXNzYWdlPUZBTFNFLCBwYWdlZC5wcmludD1UUlVFfQ0KZm9yIChpZCBpbiBjKDMzKSl7IzI4LDMwLDI0LDU5LDEwLDIwLDE4LDMsNTgsNjEsNjIsMTQsNjAsNSw2LDI3LDI2LDgsNywyMiwyMSw5LDE2LDE1LDMxLDExLDIsMjUsMTkpKXsNCiAgZm9yICh5ZWFyIGluIGMoMjAxNywyMDE4LDIwMTksMjAyMCwyMDIxKSl7DQogICAgc3RhcnRfZGF0ZSA8LSBwYXN0ZSh5ZWFyLCAnLTAzLTEyJywgc2VwID0gJycsIGNvbGxhcHNlID0gJy0nKQ0KICAgIGVuZF9kYXRlIDwtIHBhc3RlKHllYXIsICctMDUtMTUnLCBzZXAgPSAnJywgY29sbGFwc2UgPSAnLScpDQogICAgY291bnRzX2RhaWx5X2ZpbHRlcmVkIDwtIGNvdW50c19kYWlseV90b3RhbCAlPiUgZmlsdGVyKGRhdGUgPj0gc3RhcnRfZGF0ZSAmIGRhdGUgPD0gZW5kX2RhdGUgJiBiaWtlb21ldGVyX2lkID09IGlkKSAlPiUgY29sbGVjdCgpDQoNCiAgICBwIDwtIGNvdW50c19kYWlseV9maWx0ZXJlZCAlPiUgZ2dwbG90KGFlcyhkYXRlLCBjb3VudCkpICsNCiAgICBnZW9tX3BvaW50KCkgKw0KICAgIGxhYnMoDQogICAgICB0aXRsZSA9ICdEYWlseSBCaWN5Y2xlIENvdW50cycsDQogICAgICBzdWJ0aXRsZSA9IHBhc3RlKCdZZWFyID0gJywgeWVhciwgJ0lEID0gJywgaWQpKSArDQogICAgeGxhYignRGF0ZScpICsNCiAgICB5bGFiKCdDb3VudHMgRGFpbHknKSArDQogICAgdGhlbWUoDQogICAgICBwbG90LnRpdGxlID0gZWxlbWVudF90ZXh0KGhqdXN0ID0gMC41LCB2anVzdCA9IDEpLA0KICAgICAgcGxvdC5zdWJ0aXRsZSA9IGVsZW1lbnRfdGV4dChoanVzdCA9IDAuNSwgdmp1c3QgPSAtMSwgc2l6ZSA9IDEwLCBmYWNlID0gJ2l0YWxpYycpDQogICAgICApIA0KICAgIHByaW50KHApDQogICAgI2dnc2F2ZShmaWxlbmFtZSA9IHBhc3RlKCdJRCAnLCBpZCwgJyBZZWFyICcsIHllYXIsJyBjb3VudHMnLCAnLmpwZycsIHNlcCA9ICcnKSwgcGF0aCA9ICd+L0dpdGh1Yi9Bcmxpbmd0b25fQmlrZW9tZXRlcl9WaXN1YWxpemF0aW9ucy9PdXRwdXQnLCBkZXZpY2UgPSAnanBnJywgZHBpID0gJ3JldGluYScpDQp9fQ0KYGBgDQoNClllcyEgVGhlIHBsb3RzIHdlcmUgZ2VuZXJhdGVkIHBlcmZlY3RseS4gSG93ZXZlciwgb3VyIGpveSBpcyBzaG9ydC1saXZlZCBhcyB3ZSBub3RpY2UgYmlnIGhvbGVzIGluIDIwMTkgYW5kIDIwMjAgcGxvdHMuDQoNCiMgTWlzc2luZyBkYXRhIG9yIG15IG1pc3Rha2U/DQoNCldlIGNhbiBzZWUgdGhhdCBpbiAyMDE5IGFuZCAyMDIwIHRoZXJlIGlzIHNvbWUgbWlzc2luZyBkYXRhLiBJbiAyMDIwLCB0aGVyZSBpcyBvdmVyIGEgd2VlayBvZiAwIGNvdW50cyBhbmQgaW4gMjAxOSB0aGUgY291bnRzIGFyZSBqdXN0IG1pc3NpbmcuIA0KDQpXaGVuIEkgbWFudWFsbHkgcXVlcmllZCB0aGUgW0Jpa2UgQXJsaW5nb24gd2ViIGludGVyZmFjZV0oJTIyaHR0cDovL2NvdW50ZXJzLmJpa2Vhcmxpbmd0b24uY29tLyUyMikgZm9yIHRoZSAyMDIwIGRhdGVzLCB0aGVyZSBpcyBkYXRhIGluIHRoZWlyIGRhdGFiYXNlIHdpdGggY291bnQ9MC4NCg0KWyFbMjAyMCBXZWIgUXVlcnldKGltYWdlcy9pZF8zM18yMDIwX3dlYl9xdWVyeS5qcGcgIjIwMjAgV2ViIFF1ZXJ5IildKGh0dHA6Ly93ZWJzZXJ2aWNlcy5jb21tdXRlcnBhZ2UuY29tL2NvdW50ZXJzLmNmYz93c2RsJm1ldGhvZD1HZXRDb3VudEluRGF0ZVJhbmdlJmNvdW50ZXJpZD0zMyZzdGFydERhdGU9MDMvMTIvMjAyMCZlbmREYXRlPTA1LzE1LzIwMjAmZGlyZWN0aW9uPUkmbW9kZT1CJmludGVydmFsPWQpDQoNCkhvd2V2ZXIsIGZvciB0aGUgMjAxOSBtaXNzaW5nIGRhdGVzLCB0aGVyZSB3YXMgbm8gZGF0YSBhdmFpbGFibGUuDQoNClshWzIwMTkgV2ViIFF1ZXJ5XShpbWFnZXMvaWRfMzNfMjAxOV93ZWJfcXVlcnkuanBnICIyMDE5IFdlYiBRdWVyeSIpXShodHRwOi8vd2Vic2VydmljZXMuY29tbXV0ZXJwYWdlLmNvbS9jb3VudGVycy5jZmM/d3NkbCZtZXRob2Q9R2V0Q291bnRJbkRhdGVSYW5nZSZjb3VudGVyaWQ9MzMmc3RhcnREYXRlPTAzLzEyLzIwMTkmZW5kRGF0ZT0wNS8xNS8yMDE5JmRpcmVjdGlvbj1JJm1vZGU9QiZpbnRlcnZhbD1kKQ0KDQpJZiBJIHdlcmUgdG8gcmVjcmVhdGUgbXkgZGF0YWJhc2Ugb2YgY291bnRzLCBJIHdvdWxkIGluY2x1ZGUgYSBjbGF1c2UgJ2lmIHRoZXJlIGlzIG5vIGRhdGEgdG8gaW1wb3J0IGZvciBhIHRpbWUtcG9pbnQsIGNvdW50ID0gMCcuIFRoZSBCaWtlIEFybGluZ3RvbiBwZW9wbGUgcHJvYmFibHkgaGF2ZSBhIHNpbWlsYXIgY2xhdXNlLCB3aGljaCBwcm9iYWJseSBwcmV2ZW50cyB0aGUgd2ViIGludGVyZmFjZSBmcm9tIGJyZWFraW5nIHdoZW4gYSB2YWlsZCBxdWVyeSBpcyBtYWRlIGJ1dCBubyBkYXRhIGlzIGluIHRoZSBzZXJ2ZXIuDQoNCiMgQ2hvb3NpbmcgdGhlIEJpa2VvbWV0ZXJzDQoNCkFmdGVyIGNvbmZpcm1pbmcgdGhhdCB0aGUgbWlzc2luZyBkYXRhIHdhc24ndCBpbiB0aGUgZGF0YWJhc2UgYW5kIGxvb2tpbmcgdGhyb3VnaCB0aGUgcGxvdHMgb2YgZWFjaCBCaWtlb21ldGVyLCBJIGZvdW5kIHRoZXNlIEJpa2VvbWV0ZXJzIHdpdGhvdXQgbWlzc2luZyBkYXRhOiAxNCwxNSwxNiwxOCwyMiwzMSwzOS4NCg0KIyBGaWxsaW5nIGluIHRoZSBtaXNzaW5nIGRhdGE/DQoNClRoZSBNbkRPVCByZWxlYXNlZCB0aGVpciBkYXRhIHF1YWxpdHkgbWFuYWdlbWVudCBwcm9jZWR1cmVzIGluIFtNaW5uZXNvdGEncyBXYWxraW5nIGFuZCBCaWN5Y2xpbmcgRGF0YSBDb2xsZWN0aW9uIFJlcG9ydCBVcGRhdGVdKGh0dHBzOi8vd3d3LmRvdC5zdGF0ZS5tbi51cy9iaWtlLXBlZC1jb3VudGluZy9yZXBvcnRzLzIwMTgtMjAxOSUyME1pbm5lc290YVBlZEJpa2VDb3VudFJlcG9ydC5wZGYpLiBIZXJlLCB0aGV5IGxpc3QgaG93IHRoZXkgcmVtb3ZlIG91dGxpZXIsIHJldmlldyBzdXNwaWNpb3VzIGRhdGEgcG9pbnRzLCBjcmVhdGUgYSBsaW5lYXIgcmVncmVzc2lvbiBtb2RlbCwgYW5kIHVzZSBzYWlkIHJlZ3Jlc3Npb24gbW9kZWwgdG8gKiplc3RpbWF0ZSBkYWlseSB0cmFmZmljIGZvciBtaXNzaW5nIGRheXMqKi4gSW4gdGhlIGZ1dHVyZSwgSSdkIGxpa2UgdG8gcHJlZm9ybSBhIHNpbWlsYXIgYW5hbHlzaXMgdG8gZmlsbCBpbiB0aGUgbWlzc2luZyBkYXRhLg0KDQpUaGUgW25leHQgcG9zdF0oaHR0cHM6Ly9uYXRoYW5zcHJvamVjdHMuY29tL3BhcnRfNl9jcmVhdGluZ19pbml0aWFsX3Zpc3VhbGl6YXRpb25zLmh0bWwpIHdpbGwgYmUgYWJvdXQgY3JlYXRpbmcgdGhlIGdlb21fYXJlYSBwbG90IHRoYXQgbWF0Y2hlcyB0aGUgW01uRE9UJ3MgcGxvdF0oaHR0cHM6Ly9zdG9yeW1hcHMuYXJjZ2lzLmNvbS9zdG9yaWVzLzcwYTNhNTcwMDNiNTQxZWQ4ZTkxMWNkMTExMDNkYzZhKS4=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("part_5_picking_bikeometers_to_graph.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
